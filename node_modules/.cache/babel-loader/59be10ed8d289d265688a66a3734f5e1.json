{"ast":null,"code":"/**\n * helpers.js - helpers for blessed\n * Copyright (c) 2013-2015, Christopher Jeffrey and contributors (MIT License).\n * https://github.com/chjj/blessed\n */\n\n/**\n * Modules\n */\nvar fs = require('fs');\n\nvar unicode = require('./unicode');\n/**\n * Helpers\n */\n\n\nvar helpers = exports;\n\nhelpers.merge = function (a, b) {\n  Object.keys(b).forEach(function (key) {\n    a[key] = b[key];\n  });\n  return a;\n};\n\nhelpers.asort = function (obj) {\n  return obj.sort(function (a, b) {\n    a = a.name.toLowerCase();\n    b = b.name.toLowerCase();\n\n    if (a[0] === '.' && b[0] === '.') {\n      a = a[1];\n      b = b[1];\n    } else {\n      a = a[0];\n      b = b[0];\n    }\n\n    return a > b ? 1 : a < b ? -1 : 0;\n  });\n};\n\nhelpers.hsort = function (obj) {\n  return obj.sort(function (a, b) {\n    return b.index - a.index;\n  });\n};\n\nhelpers.findFile = function (start, target) {\n  return function read(dir) {\n    var files, file, stat, out;\n\n    if (dir === '/dev' || dir === '/sys' || dir === '/proc' || dir === '/net') {\n      return null;\n    }\n\n    try {\n      files = fs.readdirSync(dir);\n    } catch (e) {\n      files = [];\n    }\n\n    for (var i = 0; i < files.length; i++) {\n      file = files[i];\n\n      if (file === target) {\n        return (dir === '/' ? '' : dir) + '/' + file;\n      }\n\n      try {\n        stat = fs.lstatSync((dir === '/' ? '' : dir) + '/' + file);\n      } catch (e) {\n        stat = null;\n      }\n\n      if (stat && stat.isDirectory() && !stat.isSymbolicLink()) {\n        out = read((dir === '/' ? '' : dir) + '/' + file);\n        if (out) return out;\n      }\n    }\n\n    return null;\n  }(start);\n}; // Escape text for tag-enabled elements.\n\n\nhelpers.escape = function (text) {\n  return text.replace(/[{}]/g, function (ch) {\n    return ch === '{' ? '{open}' : '{close}';\n  });\n};\n\nhelpers.parseTags = function (text, screen) {\n  return helpers.Element.prototype._parseTags.call({\n    parseTags: true,\n    screen: screen || helpers.Screen.global\n  }, text);\n};\n\nhelpers.generateTags = function (style, text) {\n  var open = '',\n      close = '';\n  Object.keys(style || {}).forEach(function (key) {\n    var val = style[key];\n\n    if (typeof val === 'string') {\n      val = val.replace(/^light(?!-)/, 'light-');\n      val = val.replace(/^bright(?!-)/, 'bright-');\n      open = '{' + val + '-' + key + '}' + open;\n      close += '{/' + val + '-' + key + '}';\n    } else {\n      if (val === true) {\n        open = '{' + key + '}' + open;\n        close += '{/' + key + '}';\n      }\n    }\n  });\n\n  if (text != null) {\n    return open + text + close;\n  }\n\n  return {\n    open: open,\n    close: close\n  };\n};\n\nhelpers.attrToBinary = function (style, element) {\n  return helpers.Element.prototype.sattr.call(element || {}, style);\n};\n\nhelpers.stripTags = function (text) {\n  if (!text) return '';\n  return text.replace(/{(\\/?)([\\w\\-,;!#]*)}/g, '').replace(/\\x1b\\[[\\d;]*m/g, '');\n};\n\nhelpers.cleanTags = function (text) {\n  return helpers.stripTags(text).trim();\n};\n\nhelpers.dropUnicode = function (text) {\n  if (!text) return '';\n  return text.replace(unicode.chars.all, '??').replace(unicode.chars.combining, '').replace(unicode.chars.surrogate, '?');\n};\n\nhelpers.__defineGetter__('Screen', function () {\n  if (!helpers._screen) {\n    helpers._screen = require('./widgets/screen');\n  }\n\n  return helpers._screen;\n});\n\nhelpers.__defineGetter__('Element', function () {\n  if (!helpers._element) {\n    helpers._element = require('./widgets/element');\n  }\n\n  return helpers._element;\n});","map":{"version":3,"sources":["/Users/samianki/node_modules/blessed/lib/helpers.js"],"names":["fs","require","unicode","helpers","exports","merge","a","b","Object","keys","forEach","key","asort","obj","sort","name","toLowerCase","hsort","index","findFile","start","target","read","dir","files","file","stat","out","readdirSync","e","i","length","lstatSync","isDirectory","isSymbolicLink","escape","text","replace","ch","parseTags","screen","Element","prototype","_parseTags","call","Screen","global","generateTags","style","open","close","val","attrToBinary","element","sattr","stripTags","cleanTags","trim","dropUnicode","chars","all","combining","surrogate","__defineGetter__","_screen","_element"],"mappings":"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","sourcesContent":["/**\n * helpers.js - helpers for blessed\n * Copyright (c) 2013-2015, Christopher Jeffrey and contributors (MIT License).\n * https://github.com/chjj/blessed\n */\n\n/**\n * Modules\n */\n\nvar fs = require('fs');\n\nvar unicode = require('./unicode');\n\n/**\n * Helpers\n */\n\nvar helpers = exports;\n\nhelpers.merge = function(a, b) {\n  Object.keys(b).forEach(function(key) {\n    a[key] = b[key];\n  });\n  return a;\n};\n\nhelpers.asort = function(obj) {\n  return obj.sort(function(a, b) {\n    a = a.name.toLowerCase();\n    b = b.name.toLowerCase();\n\n    if (a[0] === '.' && b[0] === '.') {\n      a = a[1];\n      b = b[1];\n    } else {\n      a = a[0];\n      b = b[0];\n    }\n\n    return a > b ? 1 : (a < b ? -1 : 0);\n  });\n};\n\nhelpers.hsort = function(obj) {\n  return obj.sort(function(a, b) {\n    return b.index - a.index;\n  });\n};\n\nhelpers.findFile = function(start, target) {\n  return (function read(dir) {\n    var files, file, stat, out;\n\n    if (dir === '/dev' || dir === '/sys'\n        || dir === '/proc' || dir === '/net') {\n      return null;\n    }\n\n    try {\n      files = fs.readdirSync(dir);\n    } catch (e) {\n      files = [];\n    }\n\n    for (var i = 0; i < files.length; i++) {\n      file = files[i];\n\n      if (file === target) {\n        return (dir === '/' ? '' : dir) + '/' + file;\n      }\n\n      try {\n        stat = fs.lstatSync((dir === '/' ? '' : dir) + '/' + file);\n      } catch (e) {\n        stat = null;\n      }\n\n      if (stat && stat.isDirectory() && !stat.isSymbolicLink()) {\n        out = read((dir === '/' ? '' : dir) + '/' + file);\n        if (out) return out;\n      }\n    }\n\n    return null;\n  })(start);\n};\n\n// Escape text for tag-enabled elements.\nhelpers.escape = function(text) {\n  return text.replace(/[{}]/g, function(ch) {\n    return ch === '{' ? '{open}' : '{close}';\n  });\n};\n\nhelpers.parseTags = function(text, screen) {\n  return helpers.Element.prototype._parseTags.call(\n    { parseTags: true, screen: screen || helpers.Screen.global }, text);\n};\n\nhelpers.generateTags = function(style, text) {\n  var open = ''\n    , close = '';\n\n  Object.keys(style || {}).forEach(function(key) {\n    var val = style[key];\n    if (typeof val === 'string') {\n      val = val.replace(/^light(?!-)/, 'light-');\n      val = val.replace(/^bright(?!-)/, 'bright-');\n      open = '{' + val + '-' + key + '}' + open;\n      close += '{/' + val + '-' + key + '}';\n    } else {\n      if (val === true) {\n        open = '{' + key + '}' + open;\n        close += '{/' + key + '}';\n      }\n    }\n  });\n\n  if (text != null) {\n    return open + text + close;\n  }\n\n  return {\n    open: open,\n    close: close\n  };\n};\n\nhelpers.attrToBinary = function(style, element) {\n  return helpers.Element.prototype.sattr.call(element || {}, style);\n};\n\nhelpers.stripTags = function(text) {\n  if (!text) return '';\n  return text\n    .replace(/{(\\/?)([\\w\\-,;!#]*)}/g, '')\n    .replace(/\\x1b\\[[\\d;]*m/g, '');\n};\n\nhelpers.cleanTags = function(text) {\n  return helpers.stripTags(text).trim();\n};\n\nhelpers.dropUnicode = function(text) {\n  if (!text) return '';\n  return text\n    .replace(unicode.chars.all, '??')\n    .replace(unicode.chars.combining, '')\n    .replace(unicode.chars.surrogate, '?');\n};\n\nhelpers.__defineGetter__('Screen', function() {\n  if (!helpers._screen) {\n    helpers._screen = require('./widgets/screen');\n  }\n  return helpers._screen;\n});\n\nhelpers.__defineGetter__('Element', function() {\n  if (!helpers._element) {\n    helpers._element = require('./widgets/element');\n  }\n  return helpers._element;\n});\n"]},"metadata":{},"sourceType":"script"}