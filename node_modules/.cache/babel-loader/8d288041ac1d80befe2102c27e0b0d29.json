{"ast":null,"code":"'use strict';\n\nconst Select = require('./select');\n\nconst Form = require('./form');\n\nconst form = Form.prototype;\n\nclass Editable extends Select {\n  constructor(options) {\n    super({ ...options,\n      multiple: true\n    });\n    this.align = [this.options.align, 'left'].find(v => v != null);\n    this.emptyError = '';\n    this.values = {};\n  }\n\n  dispatch(char, key) {\n    let choice = this.focused;\n    let parent = choice.parent || {};\n\n    if (!choice.editable && !parent.editable) {\n      if (char === 'a' || char === 'i') return super[char]();\n    }\n\n    return form.dispatch.call(this, char, key);\n  }\n\n  append(char, key) {\n    return form.append.call(this, char, key);\n  }\n\n  delete(char, key) {\n    return form.delete.call(this, char, key);\n  }\n\n  space(char) {\n    return this.focused.editable ? this.append(char) : super.space();\n  }\n\n  number(char) {\n    return this.focused.editable ? this.append(char) : super.number(char);\n  }\n\n  next() {\n    return this.focused.editable ? form.next.call(this) : super.next();\n  }\n\n  prev() {\n    return this.focused.editable ? form.prev.call(this) : super.prev();\n  }\n\n  async indicator(choice, i) {\n    let symbol = choice.indicator || '';\n    let value = choice.editable ? symbol : super.indicator(choice, i);\n    return (await this.resolve(value, this.state, choice, i)) || '';\n  }\n\n  indent(choice) {\n    return choice.role === 'heading' ? '' : choice.editable ? ' ' : '  ';\n  }\n\n  async renderChoice(choice, i) {\n    choice.indent = '';\n    if (choice.editable) return form.renderChoice.call(this, choice, i);\n    return super.renderChoice(choice, i);\n  }\n\n  error() {\n    return '';\n  }\n\n  footer() {\n    return this.state.error;\n  }\n\n  async validate() {\n    let result = true;\n\n    for (let choice of this.choices) {\n      if (typeof choice.validate !== 'function') {\n        continue;\n      }\n\n      if (choice.role === 'heading') {\n        continue;\n      }\n\n      let val = choice.parent ? this.value[choice.parent.name] : this.value;\n\n      if (choice.editable) {\n        val = choice.value === choice.name ? choice.initial || '' : choice.value;\n      } else if (!this.isDisabled(choice)) {\n        val = choice.enabled === true;\n      }\n\n      result = await choice.validate(val, this.state);\n\n      if (result !== true) {\n        break;\n      }\n    }\n\n    if (result !== true) {\n      this.state.error = typeof result === 'string' ? result : 'Invalid Input';\n    }\n\n    return result;\n  }\n\n  submit() {\n    if (this.focused.newChoice === true) return super.submit();\n\n    if (this.choices.some(ch => ch.newChoice)) {\n      return this.alert();\n    }\n\n    this.value = {};\n\n    for (let choice of this.choices) {\n      let val = choice.parent ? this.value[choice.parent.name] : this.value;\n\n      if (choice.role === 'heading') {\n        this.value[choice.name] = {};\n        continue;\n      }\n\n      if (choice.editable) {\n        val[choice.name] = choice.value === choice.name ? choice.initial || '' : choice.value;\n      } else if (!this.isDisabled(choice)) {\n        val[choice.name] = choice.enabled === true;\n      }\n    }\n\n    return this.base.submit.call(this);\n  }\n\n}\n\nmodule.exports = Editable;","map":{"version":3,"sources":["/Users/samianki/node_modules/enquirer/lib/prompts/editable.js"],"names":["Select","require","Form","form","prototype","Editable","constructor","options","multiple","align","find","v","emptyError","values","dispatch","char","key","choice","focused","parent","editable","call","append","delete","space","number","next","prev","indicator","i","symbol","value","resolve","state","indent","role","renderChoice","error","footer","validate","result","choices","val","name","initial","isDisabled","enabled","submit","newChoice","some","ch","alert","base","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nconst Select = require('./select');\nconst Form = require('./form');\nconst form = Form.prototype;\n\nclass Editable extends Select {\n  constructor(options) {\n    super({ ...options, multiple: true });\n    this.align = [this.options.align, 'left'].find(v => v != null);\n    this.emptyError = '';\n    this.values = {};\n  }\n\n  dispatch(char, key) {\n    let choice = this.focused;\n    let parent = choice.parent || {};\n    if (!choice.editable && !parent.editable) {\n      if (char === 'a' || char === 'i') return super[char]();\n    }\n    return form.dispatch.call(this, char, key);\n  }\n\n  append(char, key) {\n    return form.append.call(this, char, key);\n  }\n\n  delete(char, key) {\n    return form.delete.call(this, char, key);\n  }\n\n  space(char) {\n    return this.focused.editable ? this.append(char) : super.space();\n  }\n\n  number(char) {\n    return this.focused.editable ? this.append(char) : super.number(char);\n  }\n\n  next() {\n    return this.focused.editable ? form.next.call(this) : super.next();\n  }\n\n  prev() {\n    return this.focused.editable ? form.prev.call(this) : super.prev();\n  }\n\n  async indicator(choice, i) {\n    let symbol = choice.indicator || '';\n    let value = choice.editable ? symbol : super.indicator(choice, i);\n    return await this.resolve(value, this.state, choice, i) || '';\n  }\n\n  indent(choice) {\n    return choice.role === 'heading' ? '' : (choice.editable ? ' ' : '  ');\n  }\n\n  async renderChoice(choice, i) {\n    choice.indent = '';\n    if (choice.editable) return form.renderChoice.call(this, choice, i);\n    return super.renderChoice(choice, i);\n  }\n\n  error() {\n    return '';\n  }\n\n  footer() {\n    return this.state.error;\n  }\n\n  async validate() {\n    let result = true;\n\n    for (let choice of this.choices) {\n      if (typeof choice.validate !== 'function') {\n        continue;\n      }\n\n      if (choice.role === 'heading') {\n        continue;\n      }\n\n      let val = choice.parent ? this.value[choice.parent.name] : this.value;\n\n      if (choice.editable) {\n        val = choice.value === choice.name ? choice.initial || '' : choice.value;\n      } else if (!this.isDisabled(choice)) {\n        val = choice.enabled === true;\n      }\n\n      result = await choice.validate(val, this.state);\n\n      if (result !== true) {\n        break;\n      }\n    }\n\n    if (result !== true) {\n      this.state.error = typeof result === 'string' ? result : 'Invalid Input';\n    }\n\n    return result;\n  }\n\n  submit() {\n    if (this.focused.newChoice === true) return super.submit();\n    if (this.choices.some(ch => ch.newChoice)) {\n      return this.alert();\n    }\n\n    this.value = {};\n\n    for (let choice of this.choices) {\n      let val = choice.parent ? this.value[choice.parent.name] : this.value;\n\n      if (choice.role === 'heading') {\n        this.value[choice.name] = {};\n        continue;\n      }\n\n      if (choice.editable) {\n        val[choice.name] = choice.value === choice.name\n          ? (choice.initial || '')\n          : choice.value;\n\n      } else if (!this.isDisabled(choice)) {\n        val[choice.name] = choice.enabled === true;\n      }\n    }\n\n    return this.base.submit.call(this);\n  }\n}\n\nmodule.exports = Editable;\n"]},"metadata":{},"sourceType":"script"}