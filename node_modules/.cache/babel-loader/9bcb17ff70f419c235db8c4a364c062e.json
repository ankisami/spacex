{"ast":null,"code":"/**\n * message.js - message element for blessed\n * Copyright (c) 2013-2015, Christopher Jeffrey and contributors (MIT License).\n * https://github.com/chjj/blessed\n */\n\n/**\n * Modules\n */\nvar Node = require('./node');\n\nvar Box = require('./box');\n/**\n * Message / Error\n */\n\n\nfunction Message(options) {\n  if (!(this instanceof Node)) {\n    return new Message(options);\n  }\n\n  options = options || {};\n  options.tags = true;\n  Box.call(this, options);\n}\n\nMessage.prototype.__proto__ = Box.prototype;\nMessage.prototype.type = 'message';\n\nMessage.prototype.log = Message.prototype.display = function (text, time, callback) {\n  var self = this;\n\n  if (typeof time === 'function') {\n    callback = time;\n    time = null;\n  }\n\n  if (time == null) time = 3; // Keep above:\n  // var parent = this.parent;\n  // this.detach();\n  // parent.append(this);\n\n  if (this.scrollable) {\n    this.screen.saveFocus();\n    this.focus();\n    this.scrollTo(0);\n  }\n\n  this.show();\n  this.setContent(text);\n  this.screen.render();\n\n  if (time === Infinity || time === -1 || time === 0) {\n    var end = function () {\n      if (end.done) return;\n      end.done = true;\n\n      if (self.scrollable) {\n        try {\n          self.screen.restoreFocus();\n        } catch (e) {\n          ;\n        }\n      }\n\n      self.hide();\n      self.screen.render();\n      if (callback) callback();\n    };\n\n    setTimeout(function () {\n      self.onScreenEvent('keypress', function fn(ch, key) {\n        if (key.name === 'mouse') return;\n\n        if (self.scrollable) {\n          if (key.name === 'up' || self.options.vi && key.name === 'k' || key.name === 'down' || self.options.vi && key.name === 'j' || self.options.vi && key.name === 'u' && key.ctrl || self.options.vi && key.name === 'd' && key.ctrl || self.options.vi && key.name === 'b' && key.ctrl || self.options.vi && key.name === 'f' && key.ctrl || self.options.vi && key.name === 'g' && !key.shift || self.options.vi && key.name === 'g' && key.shift) {\n            return;\n          }\n        }\n\n        if (self.options.ignoreKeys && ~self.options.ignoreKeys.indexOf(key.name)) {\n          return;\n        }\n\n        self.removeScreenEvent('keypress', fn);\n        end();\n      }); // XXX May be affected by new element.options.mouse option.\n\n      if (!self.options.mouse) return;\n      self.onScreenEvent('mouse', function fn(data) {\n        if (data.action === 'mousemove') return;\n        self.removeScreenEvent('mouse', fn);\n        end();\n      });\n    }, 10);\n    return;\n  }\n\n  setTimeout(function () {\n    self.hide();\n    self.screen.render();\n    if (callback) callback();\n  }, time * 1000);\n};\n\nMessage.prototype.error = function (text, time, callback) {\n  return this.display('{red-fg}Error: ' + text + '{/red-fg}', time, callback);\n};\n/**\n * Expose\n */\n\n\nmodule.exports = Message;","map":{"version":3,"sources":["/Users/samianki/node_modules/blessed/lib/widgets/message.js"],"names":["Node","require","Box","Message","options","tags","call","prototype","__proto__","type","log","display","text","time","callback","self","scrollable","screen","saveFocus","focus","scrollTo","show","setContent","render","Infinity","end","done","restoreFocus","e","hide","setTimeout","onScreenEvent","fn","ch","key","name","vi","ctrl","shift","ignoreKeys","indexOf","removeScreenEvent","mouse","data","action","error","module","exports"],"mappings":"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","sourcesContent":["/**\n * message.js - message element for blessed\n * Copyright (c) 2013-2015, Christopher Jeffrey and contributors (MIT License).\n * https://github.com/chjj/blessed\n */\n\n/**\n * Modules\n */\n\nvar Node = require('./node');\nvar Box = require('./box');\n\n/**\n * Message / Error\n */\n\nfunction Message(options) {\n  if (!(this instanceof Node)) {\n    return new Message(options);\n  }\n\n  options = options || {};\n  options.tags = true;\n\n  Box.call(this, options);\n}\n\nMessage.prototype.__proto__ = Box.prototype;\n\nMessage.prototype.type = 'message';\n\nMessage.prototype.log =\nMessage.prototype.display = function(text, time, callback) {\n  var self = this;\n\n  if (typeof time === 'function') {\n    callback = time;\n    time = null;\n  }\n\n  if (time == null) time = 3;\n\n  // Keep above:\n  // var parent = this.parent;\n  // this.detach();\n  // parent.append(this);\n\n  if (this.scrollable) {\n    this.screen.saveFocus();\n    this.focus();\n    this.scrollTo(0);\n  }\n\n  this.show();\n  this.setContent(text);\n  this.screen.render();\n\n  if (time === Infinity || time === -1 || time === 0) {\n    var end = function() {\n      if (end.done) return;\n      end.done = true;\n      if (self.scrollable) {\n        try {\n          self.screen.restoreFocus();\n        } catch (e) {\n          ;\n        }\n      }\n      self.hide();\n      self.screen.render();\n      if (callback) callback();\n    };\n\n    setTimeout(function() {\n      self.onScreenEvent('keypress', function fn(ch, key) {\n        if (key.name === 'mouse') return;\n        if (self.scrollable) {\n          if ((key.name === 'up' || (self.options.vi && key.name === 'k'))\n            || (key.name === 'down' || (self.options.vi && key.name === 'j'))\n            || (self.options.vi && key.name === 'u' && key.ctrl)\n            || (self.options.vi && key.name === 'd' && key.ctrl)\n            || (self.options.vi && key.name === 'b' && key.ctrl)\n            || (self.options.vi && key.name === 'f' && key.ctrl)\n            || (self.options.vi && key.name === 'g' && !key.shift)\n            || (self.options.vi && key.name === 'g' && key.shift)) {\n            return;\n          }\n        }\n        if (self.options.ignoreKeys && ~self.options.ignoreKeys.indexOf(key.name)) {\n          return;\n        }\n        self.removeScreenEvent('keypress', fn);\n        end();\n      });\n      // XXX May be affected by new element.options.mouse option.\n      if (!self.options.mouse) return;\n      self.onScreenEvent('mouse', function fn(data) {\n        if (data.action === 'mousemove') return;\n        self.removeScreenEvent('mouse', fn);\n        end();\n      });\n    }, 10);\n\n    return;\n  }\n\n  setTimeout(function() {\n    self.hide();\n    self.screen.render();\n    if (callback) callback();\n  }, time * 1000);\n};\n\nMessage.prototype.error = function(text, time, callback) {\n  return this.display('{red-fg}Error: ' + text + '{/red-fg}', time, callback);\n};\n\n/**\n * Expose\n */\n\nmodule.exports = Message;\n"]},"metadata":{},"sourceType":"script"}