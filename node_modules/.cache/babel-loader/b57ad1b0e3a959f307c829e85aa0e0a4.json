{"ast":null,"code":"var Bar = module.exports = function (charm, x, y, params) {\n  this.charm = charm;\n  this.x = x;\n  this.y = y;\n  this.width = params.width || 10;\n  this.offset = params.offset || 0;\n  this.before = params.before || '[';\n  this.after = params.after || '] ';\n  this.solid = params.solid || {\n    background: 'blue',\n    foreground: 'white',\n    text: '|'\n  };\n  this.empty = params.empty || {\n    background: null,\n    foreground: null,\n    text: ' '\n  };\n  this.progress = {\n    percent: 0,\n    ratio: 0\n  };\n};\n\nBar.prototype.draw = function (bars, msg) {\n  bars = Math.floor(bars);\n  this.charm.push(true);\n\n  if (this.y.toString().match(/^[+-]/)) {\n    if (this.y.toString().match(/^-/)) {\n      this.charm.up(-this.y + this.offset);\n    } else if (this.y.toString().match(/^\\+/)) {\n      this.charm.down(+this.y - this.offset);\n    }\n\n    this.charm.column(+this.x);\n  } else {\n    this.charm.position(this.x, this.y);\n  }\n\n  this.charm.write(this.before);\n\n  if (this.solid.background) {\n    this.charm.background(this.solid.background);\n  }\n\n  if (this.solid.foreground) {\n    this.charm.foreground(this.solid.foreground);\n  }\n\n  this.charm.write(Array(bars + 1).join(this.solid.text)).display('reset');\n\n  if (this.empty.background) {\n    this.charm.background(this.empty.background);\n  }\n\n  if (this.empty.foreground) {\n    this.charm.foreground(this.empty.foreground);\n  }\n\n  this.charm.write(Array(this.width - bars + 1).join(this.empty.text)).write(this.after + msg);\n  this.charm.pop(true);\n  return this;\n};\n\nBar.prototype.percent = function (p, msg) {\n  if (p === undefined) {\n    return this.progress.percent;\n  } else {\n    p = Math.min(100, p);\n    this.progress.percent = p;\n    this.progress.ratio = [p, 100];\n    this.draw(this.width * p / 100, msg || Math.floor(p) + ' %');\n    return this;\n  }\n};\n\nBar.prototype.ratio = function (n, d, msg) {\n  if (n === undefined && d === undefined) {\n    return this.progress.ratio;\n  } else {\n    var f = n / d;\n    this.progress.ratio = [n, d];\n    this.progress.percent = f * 100;\n    this.draw(this.width * f, msg || n + ' / ' + d);\n    return this;\n  }\n};","map":{"version":3,"sources":["/Users/samianki/node_modules/pm2-multimeter/lib/bar.js"],"names":["Bar","module","exports","charm","x","y","params","width","offset","before","after","solid","background","foreground","text","empty","progress","percent","ratio","prototype","draw","bars","msg","Math","floor","push","toString","match","up","down","column","position","write","Array","join","display","pop","p","undefined","min","n","d","f"],"mappings":"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","sourcesContent":["var Bar = module.exports = function (charm, x, y, params) {\n    this.charm = charm;\n    this.x = x;\n    this.y = y;\n    this.width = params.width || 10;\n    this.offset = params.offset || 0;\n    \n    this.before = params.before || '[';\n    this.after = params.after || '] ';\n    \n    this.solid = params.solid || {\n        background : 'blue',\n        foreground : 'white',\n        text : '|'\n    };\n    \n    this.empty = params.empty || {\n        background : null,\n        foreground : null,\n        text : ' '\n    };\n    \n    this.progress = {\n        percent : 0,\n        ratio : 0\n    };\n}\n\nBar.prototype.draw = function (bars, msg) {\n    bars = Math.floor(bars);\n    this.charm.push(true);\n    \n    if (this.y.toString().match(/^[+-]/)) {\n        if (this.y.toString().match(/^-/)) {\n            this.charm.up(-this.y + this.offset);\n        }\n        else if (this.y.toString().match(/^\\+/)) {\n            this.charm.down(+this.y - this.offset);\n        }\n        this.charm.column(+this.x);\n    }\n    else {\n        this.charm.position(this.x, this.y);\n    }\n    \n    this.charm.write(this.before);\n    \n    if (this.solid.background) {\n        this.charm.background(this.solid.background);\n    }\n    if (this.solid.foreground) {\n        this.charm.foreground(this.solid.foreground);\n    }\n    \n    this.charm\n        .write(Array(bars + 1).join(this.solid.text))\n        .display('reset')\n    ;\n    \n    if (this.empty.background) {\n        this.charm.background(this.empty.background);\n    }\n    if (this.empty.foreground) {\n        this.charm.foreground(this.empty.foreground);\n    }\n    \n    this.charm\n        .write(Array(this.width - bars + 1).join(this.empty.text))\n        .write(this.after + msg)\n    ;\n    \n    this.charm.pop(true);\n    \n    return this;\n};\n\nBar.prototype.percent = function (p, msg) {\n    if (p === undefined) {\n        return this.progress.percent;\n    }\n    else {\n        p = Math.min(100, p);\n        this.progress.percent = p;\n        this.progress.ratio = [ p, 100 ];\n        \n        this.draw(\n            this.width * p / 100,\n            msg || (Math.floor(p) + ' %')\n        );\n        \n        return this;\n    }\n};\n\nBar.prototype.ratio = function (n, d, msg) {\n    if (n === undefined && d === undefined) {\n        return this.progress.ratio;\n    }\n    else {\n        var f = n / d;\n        this.progress.ratio = [ n, d ];\n        this.progress.percent = f * 100;\n        \n        this.draw(\n            this.width * f,\n            msg || (n + ' / ' + d)\n        );\n        \n        return this;\n    }\n};\n"]},"metadata":{},"sourceType":"script"}