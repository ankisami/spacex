{"ast":null,"code":"/**\n * Copyright 2013 the PM2 project authors. All rights reserved.\n * Use of this source code is governed by a license that\n * can be found in the LICENSE file.\n */\nvar Utility = require('./Utility.js');\n\nmodule.exports = function (God) {\n  God.notify = function (action_name, data, manually) {\n    God.bus.emit('process:event', {\n      event: action_name,\n      manually: typeof manually == 'undefined' ? false : true,\n      process: Utility.formatCLU(data),\n      at: Utility.getDate()\n    });\n  };\n\n  God.notifyByProcessId = function (opts, cb) {\n    if (typeof opts.id === 'undefined') {\n      return cb(new Error('process id missing'));\n    }\n\n    var proc = God.clusters_db[opts.id];\n\n    if (!proc) {\n      return cb(new Error('process id doesnt exists'));\n    }\n\n    God.bus.emit('process:event', {\n      event: opts.action_name,\n      manually: typeof opts.manually == 'undefined' ? false : true,\n      process: Utility.formatCLU(proc),\n      at: Utility.getDate()\n    });\n    process.nextTick(function () {\n      return cb ? cb(null) : false;\n    });\n    return false;\n  };\n};","map":{"version":3,"sources":["/Users/samianki/node_modules/pm2/lib/Event.js"],"names":["Utility","require","module","exports","God","notify","action_name","data","manually","bus","emit","event","process","formatCLU","at","getDate","notifyByProcessId","opts","cb","id","Error","proc","clusters_db","nextTick"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA,IAAIA,OAAO,GAASC,OAAO,CAAC,cAAD,CAA3B;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,GAAT,EAAc;AAE7BA,EAAAA,GAAG,CAACC,MAAJ,GAAa,UAASC,WAAT,EAAsBC,IAAtB,EAA4BC,QAA5B,EAAsC;AACjDJ,IAAAA,GAAG,CAACK,GAAJ,CAAQC,IAAR,CAAa,eAAb,EAA8B;AAC5BC,MAAAA,KAAK,EAAQL,WADe;AAE5BE,MAAAA,QAAQ,EAAK,OAAOA,QAAP,IAAoB,WAApB,GAAkC,KAAlC,GAA0C,IAF3B;AAG5BI,MAAAA,OAAO,EAAMZ,OAAO,CAACa,SAAR,CAAkBN,IAAlB,CAHe;AAI5BO,MAAAA,EAAE,EAAWd,OAAO,CAACe,OAAR;AAJe,KAA9B;AAMD,GAPD;;AASAX,EAAAA,GAAG,CAACY,iBAAJ,GAAwB,UAASC,IAAT,EAAeC,EAAf,EAAmB;AACzC,QAAI,OAAOD,IAAI,CAACE,EAAZ,KAAoB,WAAxB,EAAqC;AAAE,aAAOD,EAAE,CAAC,IAAIE,KAAJ,CAAU,oBAAV,CAAD,CAAT;AAA6C;;AACpF,QAAIC,IAAI,GAAGjB,GAAG,CAACkB,WAAJ,CAAgBL,IAAI,CAACE,EAArB,CAAX;;AACA,QAAI,CAACE,IAAL,EAAW;AAAE,aAAOH,EAAE,CAAC,IAAIE,KAAJ,CAAU,0BAAV,CAAD,CAAT;AAAmD;;AAEhEhB,IAAAA,GAAG,CAACK,GAAJ,CAAQC,IAAR,CAAa,eAAb,EAA8B;AAC5BC,MAAAA,KAAK,EAAQM,IAAI,CAACX,WADU;AAE5BE,MAAAA,QAAQ,EAAK,OAAOS,IAAI,CAACT,QAAZ,IAAyB,WAAzB,GAAuC,KAAvC,GAA+C,IAFhC;AAG5BI,MAAAA,OAAO,EAAMZ,OAAO,CAACa,SAAR,CAAkBQ,IAAlB,CAHe;AAI5BP,MAAAA,EAAE,EAAWd,OAAO,CAACe,OAAR;AAJe,KAA9B;AAOAH,IAAAA,OAAO,CAACW,QAAR,CAAiB,YAAW;AAC1B,aAAOL,EAAE,GAAGA,EAAE,CAAC,IAAD,CAAL,GAAc,KAAvB;AACD,KAFD;AAGA,WAAO,KAAP;AACD,GAhBD;AAiBD,CA5BD","sourcesContent":["/**\n * Copyright 2013 the PM2 project authors. All rights reserved.\n * Use of this source code is governed by a license that\n * can be found in the LICENSE file.\n */\n\nvar Utility       = require('./Utility.js');\n\nmodule.exports = function(God) {\n\n  God.notify = function(action_name, data, manually) {\n    God.bus.emit('process:event', {\n      event      : action_name,\n      manually   : typeof(manually) == 'undefined' ? false : true,\n      process    : Utility.formatCLU(data),\n      at         : Utility.getDate()\n    });\n  };\n\n  God.notifyByProcessId = function(opts, cb) {\n    if (typeof(opts.id) === 'undefined') { return cb(new Error('process id missing')); }\n    var proc = God.clusters_db[opts.id];\n    if (!proc) { return cb(new Error('process id doesnt exists')); }\n\n    God.bus.emit('process:event', {\n      event      : opts.action_name,\n      manually   : typeof(opts.manually) == 'undefined' ? false : true,\n      process    : Utility.formatCLU(proc),\n      at         : Utility.getDate()\n    });\n\n    process.nextTick(function() {\n      return cb ? cb(null) : false;\n    });\n    return false;\n  };\n};\n"]},"metadata":{},"sourceType":"script"}