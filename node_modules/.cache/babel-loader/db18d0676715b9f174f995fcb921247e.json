{"ast":null,"code":"'use strict'; // @ts-check\n// ==================================================================================\n// utils.js\n// ----------------------------------------------------------------------------------\n// Description:   System Information - library\n//                for Node.js\n// Copyright:     (c) 2014 - 2020\n// Author:        Sebastian Hildebrandt\n// ----------------------------------------------------------------------------------\n// License:       MIT\n// ==================================================================================\n// 0. helper functions\n// ----------------------------------------------------------------------------------\n\nconst os = require('os');\n\nconst fs = require('fs');\n\nconst spawn = require('child_process').spawn;\n\nconst exec = require('child_process').exec;\n\nconst execSync = require('child_process').execSync;\n\nconst util = require('util');\n\nlet _platform = process.platform;\n\nconst _linux = _platform === 'linux';\n\nconst _darwin = _platform === 'darwin';\n\nconst _windows = _platform === 'win32';\n\nconst _freebsd = _platform === 'freebsd';\n\nconst _openbsd = _platform === 'openbsd';\n\nconst _netbsd = _platform === 'netbsd'; // const _sunos = (_platform === 'sunos');\n\n\nlet _cores = 0;\nlet wmicPath = '';\nlet codepage = '';\nconst execOptsWin = {\n  windowsHide: true,\n  maxBuffer: 1024 * 20000,\n  encoding: 'UTF-8',\n  env: util._extend({}, process.env, {\n    LANG: 'en_US.UTF-8'\n  })\n};\n\nfunction toInt(value) {\n  let result = parseInt(value, 10);\n\n  if (isNaN(result)) {\n    result = 0;\n  }\n\n  return result;\n}\n\nfunction isFunction(functionToCheck) {\n  let getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\nfunction unique(obj) {\n  let uniques = [];\n  let stringify = {};\n\n  for (let i = 0; i < obj.length; i++) {\n    let keys = Object.keys(obj[i]);\n    keys.sort(function (a, b) {\n      return a - b;\n    });\n    let str = '';\n\n    for (let j = 0; j < keys.length; j++) {\n      str += JSON.stringify(keys[j]);\n      str += JSON.stringify(obj[i][keys[j]]);\n    }\n\n    if (!{}.hasOwnProperty.call(stringify, str)) {\n      uniques.push(obj[i]);\n      stringify[str] = true;\n    }\n  }\n\n  return uniques;\n}\n\nfunction sortByKey(array, keys) {\n  return array.sort(function (a, b) {\n    let x = '';\n    let y = '';\n    keys.forEach(function (key) {\n      x = x + a[key];\n      y = y + b[key];\n    });\n    return x < y ? -1 : x > y ? 1 : 0;\n  });\n}\n\nfunction cores() {\n  if (_cores === 0) {\n    _cores = os.cpus().length;\n  }\n\n  return _cores;\n}\n\nfunction getValue(lines, property, separator, trimmed) {\n  separator = separator || ':';\n  property = property.toLowerCase();\n  trimmed = trimmed || false;\n\n  for (let i = 0; i < lines.length; i++) {\n    let line = lines[i].toLowerCase().replace(/\\t/g, '');\n\n    if (trimmed) {\n      line = line.trim();\n    }\n\n    if (line.startsWith(property)) {\n      const parts = lines[i].split(separator);\n\n      if (parts.length >= 2) {\n        parts.shift();\n        return parts.join(separator).trim();\n      } else {\n        return '';\n      }\n    }\n  }\n\n  return '';\n}\n\nfunction decodeEscapeSequence(str, base) {\n  base = base || 16;\n  return str.replace(/\\\\x([0-9A-Fa-f]{2})/g, function () {\n    return String.fromCharCode(parseInt(arguments[1], base));\n  });\n}\n\nfunction detectSplit(str) {\n  let seperator = '';\n  let part = 0;\n  str.split('').forEach(element => {\n    if (element >= '0' && element <= '9') {\n      if (part === 1) {\n        part++;\n      }\n    } else {\n      if (part === 0) {\n        part++;\n      }\n\n      if (part === 1) {\n        seperator += element;\n      }\n    }\n  });\n  return seperator;\n}\n\nfunction parseTime(t, pmDesignator) {\n  pmDesignator = pmDesignator || '';\n  t = t.toUpperCase();\n  let hour = 0;\n  let min = 0;\n  let splitter = detectSplit(t);\n  let parts = t.split(splitter);\n\n  if (parts.length >= 2) {\n    if (parts[2]) {\n      parts[1] += parts[2];\n    }\n\n    let isPM = parts[1] && parts[1].toLowerCase().indexOf('pm') > -1 || parts[1].toLowerCase().indexOf('p.m.') > -1 || parts[1].toLowerCase().indexOf('p. m.') > -1 || parts[1].toLowerCase().indexOf('n') > -1 || parts[1].toLowerCase().indexOf('ch') > -1 || parts[1].toLowerCase().indexOf('Ã¶s') > -1 || pmDesignator && parts[1].toLowerCase().indexOf(pmDesignator) > -1;\n    hour = parseInt(parts[0], 10);\n    min = parseInt(parts[1], 10);\n    hour = isPM && hour < 12 ? hour + 12 : hour;\n    return ('0' + hour).substr(-2) + ':' + ('0' + min).substr(-2);\n  }\n}\n\nfunction parseDateTime(dt, culture) {\n  const result = {\n    date: '',\n    time: ''\n  };\n  culture = culture || {};\n  let dateFormat = (culture.dateFormat || '').toLowerCase();\n  let pmDesignator = culture.pmDesignator || '';\n  const parts = dt.split(' ');\n\n  if (parts[0]) {\n    if (parts[0].indexOf('/') >= 0) {\n      // Dateformat: mm/dd/yyyy or dd/mm/yyyy or dd/mm/yy or yyyy/mm/dd\n      const dtparts = parts[0].split('/');\n\n      if (dtparts.length === 3) {\n        if (dtparts[0].length === 4) {\n          // Dateformat: yyyy/mm/dd\n          result.date = dtparts[0] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[2]).substr(-2);\n        } else if (dtparts[2].length === 2) {\n          if (dateFormat.indexOf('/d/') > -1 || dateFormat.indexOf('/dd/') > -1) {\n            // Dateformat: mm/dd/yy\n            result.date = '20' + dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n          } else {\n            // Dateformat: dd/mm/yy\n            result.date = '20' + dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n          }\n        } else {\n          // Dateformat: mm/dd/yyyy or dd/mm/yyyy\n          const isEN = dt.toLowerCase().indexOf('pm') > -1 || dt.toLowerCase().indexOf('p.m.') > -1 || dt.toLowerCase().indexOf('p. m.') > -1 || dt.toLowerCase().indexOf('am') > -1 || dt.toLowerCase().indexOf('a.m.') > -1 || dt.toLowerCase().indexOf('a. m.') > -1;\n\n          if ((isEN || dateFormat.indexOf('/d/') > -1 || dateFormat.indexOf('/dd/') > -1) && dateFormat.indexOf('dd/') !== 0) {\n            // Dateformat: mm/dd/yyyy\n            result.date = dtparts[2] + '-' + ('0' + dtparts[0]).substr(-2) + '-' + ('0' + dtparts[1]).substr(-2);\n          } else {\n            // Dateformat: dd/mm/yyyy\n            result.date = dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n          }\n        }\n      }\n    }\n\n    if (parts[0].indexOf('.') >= 0) {\n      const dtparts = parts[0].split('.');\n\n      if (dtparts.length === 3) {\n        if (dateFormat.indexOf('.d.') > -1 || dateFormat.indexOf('.dd.') > -1) {\n          // Dateformat: mm.dd.yyyy\n          result.date = dtparts[2] + '-' + ('0' + dtparts[0]).substr(-2) + '-' + ('0' + dtparts[1]).substr(-2);\n        } else {\n          // Dateformat: dd.mm.yyyy\n          result.date = dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n        }\n      }\n    }\n\n    if (parts[0].indexOf('-') >= 0) {\n      // Dateformat: yyyy-mm-dd\n      const dtparts = parts[0].split('-');\n\n      if (dtparts.length === 3) {\n        result.date = dtparts[0] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[2]).substr(-2);\n      }\n    }\n  }\n\n  if (parts[1]) {\n    parts.shift();\n    let time = parts.join(' ');\n    result.time = parseTime(time, pmDesignator);\n  }\n\n  return result;\n}\n\nfunction parseHead(head, rights) {\n  let space = rights > 0;\n  let count = 1;\n  let from = 0;\n  let to = 0;\n  let result = [];\n\n  for (let i = 0; i < head.length; i++) {\n    if (count <= rights) {\n      // if (head[i] === ' ' && !space) {\n      if (/\\s/.test(head[i]) && !space) {\n        to = i - 1;\n        result.push({\n          from: from,\n          to: to + 1,\n          cap: head.substring(from, to + 1)\n        });\n        from = to + 2;\n        count++;\n      }\n\n      space = head[i] === ' ';\n    } else {\n      if (!/\\s/.test(head[i]) && space) {\n        to = i - 1;\n\n        if (from < to) {\n          result.push({\n            from: from,\n            to: to,\n            cap: head.substring(from, to)\n          });\n        }\n\n        from = to + 1;\n        count++;\n      }\n\n      space = head[i] === ' ';\n    }\n  }\n\n  to = 1000;\n  result.push({\n    from: from,\n    to: to,\n    cap: head.substring(from, to)\n  });\n  let len = result.length;\n\n  for (var i = 0; i < len; i++) {\n    if (result[i].cap.replace(/\\s/g, '').length === 0) {\n      if (i + 1 < len) {\n        result[i].to = result[i + 1].to;\n        result[i].cap = result[i].cap + result[i + 1].cap;\n        result.splice(i + 1, 1);\n        len = len - 1;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction findObjectByKey(array, key, value) {\n  for (let i = 0; i < array.length; i++) {\n    if (array[i][key] === value) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction getWmic() {\n  if (os.type() === 'Windows_NT' && !wmicPath) {\n    wmicPath = process.env.WINDIR + '\\\\system32\\\\wbem\\\\wmic.exe';\n\n    if (!fs.existsSync(wmicPath)) {\n      try {\n        const wmicPathArray = execSync('WHERE WMIC').toString().split('\\r\\n');\n\n        if (wmicPathArray && wmicPathArray.length) {\n          wmicPath = wmicPathArray[0];\n        } else {\n          wmicPath = 'wmic';\n        }\n      } catch (e) {\n        wmicPath = 'wmic';\n      }\n    }\n  }\n\n  return wmicPath;\n}\n\nfunction wmic(command, options) {\n  options = options || execOptsWin;\n  return new Promise(resolve => {\n    process.nextTick(() => {\n      try {\n        exec(process.env.WINDIR + '\\\\system32\\\\chcp.com 65001 | ' + getWmic() + ' ' + command, options, function (error, stdout) {\n          resolve(stdout, error);\n        }).stdin.end();\n      } catch (e) {\n        resolve('', e);\n      }\n    });\n  });\n}\n\nfunction getVboxmanage() {\n  return _windows ? process.env.VBOX_INSTALL_PATH || process.env.VBOX_MSI_INSTALL_PATH + '\\\\VBoxManage.exe' + '\" ' : 'vboxmanage';\n}\n\nfunction powerShell(cmd) {\n  let result = '';\n  return new Promise(resolve => {\n    process.nextTick(() => {\n      try {\n        const child = spawn('powershell.exe', ['-NoLogo', '-InputFormat', 'Text', '-NoExit', '-ExecutionPolicy', 'Unrestricted', '-Command', '-'], {\n          stdio: 'pipe',\n          windowsHide: true,\n          maxBuffer: 1024 * 20000,\n          encoding: 'UTF-8',\n          env: util._extend({}, process.env, {\n            LANG: 'en_US.UTF-8'\n          })\n        });\n\n        if (child && !child.pid) {\n          child.on('error', function () {\n            resolve(result);\n          });\n        }\n\n        if (child && child.pid) {\n          child.stdout.on('data', function (data) {\n            result = result + data.toString('utf8');\n          });\n          child.stderr.on('data', function () {\n            child.kill();\n            resolve(result);\n          });\n          child.on('close', function () {\n            child.kill();\n            resolve(result);\n          });\n          child.on('error', function () {\n            child.kill();\n            resolve(result);\n          });\n\n          try {\n            child.stdin.write(cmd + os.EOL);\n            child.stdin.write('exit' + os.EOL);\n            child.stdin.end();\n          } catch (e) {\n            child.kill();\n            resolve(result);\n          }\n        } else {\n          resolve(result);\n        }\n      } catch (e) {\n        resolve(result);\n      }\n    });\n  });\n}\n\nfunction getCodepage() {\n  if (_windows) {\n    if (!codepage) {\n      try {\n        const stdout = execSync('chcp');\n        const lines = stdout.toString().split('\\r\\n');\n        const parts = lines[0].split(':');\n        codepage = parts.length > 1 ? parts[1].replace('.', '') : '';\n      } catch (err) {\n        codepage = '437';\n      }\n    }\n\n    return codepage;\n  }\n\n  if (_linux || _darwin || _freebsd || _openbsd || _netbsd) {\n    if (!codepage) {\n      try {\n        const stdout = execSync('echo $LANG');\n        const lines = stdout.toString().split('\\r\\n');\n        const parts = lines[0].split('.');\n        codepage = parts.length > 1 ? parts[1].trim() : '';\n\n        if (!codepage) {\n          codepage = 'UTF-8';\n        }\n      } catch (err) {\n        codepage = 'UTF-8';\n      }\n    }\n\n    return codepage;\n  }\n}\n\nfunction isRaspberry() {\n  const PI_MODEL_NO = ['BCM2708', 'BCM2709', 'BCM2710', 'BCM2835', 'BCM2837B0'];\n  let cpuinfo = [];\n\n  try {\n    cpuinfo = fs.readFileSync('/proc/cpuinfo', {\n      encoding: 'utf8'\n    }).split('\\n');\n  } catch (e) {\n    return false;\n  }\n\n  const hardware = getValue(cpuinfo, 'hardware');\n  return hardware && PI_MODEL_NO.indexOf(hardware) > -1;\n}\n\nfunction isRaspbian() {\n  let osrelease = [];\n\n  try {\n    osrelease = fs.readFileSync('/etc/os-release', {\n      encoding: 'utf8'\n    }).split('\\n');\n  } catch (e) {\n    return false;\n  }\n\n  const id = getValue(osrelease, 'id');\n  return id && id.indexOf('raspbian') > -1;\n}\n\nfunction execWin(cmd, opts, callback) {\n  if (!callback) {\n    callback = opts;\n    opts = execOptsWin;\n  }\n\n  let newCmd = 'chcp 65001 > nul && cmd /C ' + cmd + ' && chcp ' + codepage + ' > nul';\n  exec(newCmd, opts, function (error, stdout) {\n    callback(error, stdout);\n  });\n}\n\nfunction darwinXcodeExists() {\n  const cmdLineToolsExists = fs.existsSync('/Library/Developer/CommandLineTools/usr/bin/');\n  const xcodeAppExists = fs.existsSync('/Applications/Xcode.app/Contents/Developer/Tools');\n  const xcodeExists = fs.existsSync('/Library/Developer/Xcode/');\n  return cmdLineToolsExists || xcodeExists || xcodeAppExists;\n}\n\nfunction nanoSeconds() {\n  const time = process.hrtime();\n\n  if (!Array.isArray(time) || time.length !== 2) {\n    return 0;\n  }\n\n  return +time[0] * 1e9 + +time[1];\n}\n\nfunction countUniqueLines(lines, startingWith) {\n  startingWith = startingWith || '';\n  const uniqueLines = [];\n  lines.forEach(line => {\n    if (line.startsWith(startingWith)) {\n      if (uniqueLines.indexOf(line) === -1) {\n        uniqueLines.push(line);\n      }\n    }\n  });\n  return uniqueLines.length;\n}\n\nfunction countLines(lines, startingWith) {\n  startingWith = startingWith || '';\n  const uniqueLines = [];\n  lines.forEach(line => {\n    if (line.startsWith(startingWith)) {\n      uniqueLines.push(line);\n    }\n  });\n  return uniqueLines.length;\n}\n\nfunction sanitizeShellString(str) {\n  let result = str || '';\n  result = result.replace(/>/g, '');\n  result = result.replace(/</g, '');\n  result = result.replace(/\\*/g, '');\n  result = result.replace(/\\?/g, '');\n  result = result.replace(/\\[/g, '');\n  result = result.replace(/\\]/g, '');\n  result = result.replace(/\\|/g, '');\n  result = result.replace(/\\`/g, '');\n  result = result.replace(/\\$/g, '');\n  result = result.replace(/;/g, '');\n  result = result.replace(/&/g, '');\n  result = result.replace(/\\)/g, '');\n  result = result.replace(/\\(/g, '');\n  result = result.replace(/\\$/g, '');\n  result = result.replace(/#/g, '');\n  result = result.replace(/\\\\/g, '');\n  result = result.replace(/\\t/g, '');\n  result = result.replace(/\\n/g, '');\n  result = result.replace(/\\\"/g, '');\n  return result;\n}\n\nfunction hex2bin(hex) {\n  return (\"00000000\" + parseInt(hex, 16).toString(2)).substr(-8);\n}\n\nfunction decodePiCpuinfo(lines) {\n  // https://www.raspberrypi.org/documentation/hardware/raspberrypi/revision-codes/README.md\n  const oldRevisionCodes = {\n    '0002': {\n      type: 'B',\n      revision: '1.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0003': {\n      type: 'B',\n      revision: '1.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0004': {\n      type: 'B',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0005': {\n      type: 'B',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Qisda',\n      processor: 'BCM2835'\n    },\n    '0006': {\n      type: 'B',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0007': {\n      type: 'A',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0008': {\n      type: 'A',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0009': {\n      type: 'A',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Qisda',\n      processor: 'BCM2835'\n    },\n    '000d': {\n      type: 'B',\n      revision: '2.0',\n      memory: 512,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '000e': {\n      type: 'B',\n      revision: '2.0',\n      memory: 512,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '000f': {\n      type: 'B',\n      revision: '2.0',\n      memory: 512,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0010': {\n      type: 'B+',\n      revision: '1.2',\n      memory: 512,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0011': {\n      type: 'CM1',\n      revision: '1.0',\n      memory: 512,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0012': {\n      type: 'A+',\n      revision: '1.1',\n      memory: 256,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0013': {\n      type: 'B+',\n      revision: '1.2',\n      memory: 512,\n      manufacturer: 'Embest',\n      processor: 'BCM2835'\n    },\n    '0014': {\n      type: 'CM1',\n      revision: '1.0',\n      memory: 512,\n      manufacturer: 'Embest',\n      processor: 'BCM2835'\n    },\n    '0015': {\n      type: 'A+',\n      revision: '1.1',\n      memory: 256,\n      manufacturer: '512MB\tEmbest',\n      processor: 'BCM2835'\n    }\n  };\n  const processorList = ['BMC2835', 'BMC2836', 'BMC2837', 'BMC2711'];\n  const manufacturerList = ['Sony UK', 'Egoman', 'Embest', 'Sony Japan', 'Embest', 'Stadium'];\n  const typeList = {\n    '00': 'A',\n    '01': 'B',\n    '02': 'A+',\n    '03': 'B+',\n    '04': '2B',\n    '05': 'Alpha (early prototype)',\n    '06': 'CM1',\n    '08': '3B',\n    '09': 'Zero',\n    '0a': 'CM3',\n    '0c': 'Zero W',\n    '0d': '3B+',\n    '0e': '3A+',\n    '0f': 'Internal use only',\n    '10': 'CM3+',\n    '11': '4B',\n    '13': '400',\n    '14': 'CM4'\n  };\n  const revisionCode = getValue(lines, 'revision', ':', true);\n  const model = getValue(lines, 'model:', ':', true);\n  const serial = getValue(lines, 'serial', ':', true);\n  let result = {};\n\n  if (oldRevisionCodes.hasOwnProperty(revisionCode)) {\n    // old revision codes\n    result = {\n      model,\n      serial,\n      revisionCode,\n      memory: oldRevisionCodes[revisionCode].memory,\n      manufacturer: oldRevisionCodes[revisionCode].manufacturer,\n      processor: oldRevisionCodes[revisionCode].processor,\n      type: oldRevisionCodes[revisionCode].type,\n      revision: oldRevisionCodes[revisionCode].revision\n    };\n  } else {\n    // new revision code\n    const revision = ('00000000' + getValue(lines, 'revision', ':', true).toLowerCase()).substr(-8); // const revisionStyleNew = hex2bin(revision.substr(2, 1)).substr(4, 1) === '1';\n\n    const memSizeCode = parseInt(hex2bin(revision.substr(2, 1)).substr(5, 3), 2) || 0;\n    const manufacturer = manufacturerList[parseInt(revision.substr(3, 1), 10)];\n    const processor = processorList[parseInt(revision.substr(4, 1), 10)];\n    const typeCode = revision.substr(5, 2);\n    result = {\n      model,\n      serial,\n      revisionCode,\n      memory: 256 * Math.pow(2, memSizeCode),\n      manufacturer,\n      processor,\n      type: typeList.hasOwnProperty(typeCode) ? typeList[typeCode] : '',\n      revision: '1.' + revision.substr(7, 1)\n    };\n  }\n\n  return result;\n}\n\nfunction noop() {}\n\nexports.toInt = toInt;\nexports.execOptsWin = execOptsWin;\nexports.getCodepage = getCodepage;\nexports.execWin = execWin;\nexports.isFunction = isFunction;\nexports.unique = unique;\nexports.sortByKey = sortByKey;\nexports.cores = cores;\nexports.getValue = getValue;\nexports.decodeEscapeSequence = decodeEscapeSequence;\nexports.parseDateTime = parseDateTime;\nexports.parseHead = parseHead;\nexports.findObjectByKey = findObjectByKey;\nexports.getWmic = getWmic;\nexports.wmic = wmic;\nexports.darwinXcodeExists = darwinXcodeExists;\nexports.getVboxmanage = getVboxmanage;\nexports.powerShell = powerShell;\nexports.nanoSeconds = nanoSeconds;\nexports.countUniqueLines = countUniqueLines;\nexports.countLines = countLines;\nexports.noop = noop;\nexports.isRaspberry = isRaspberry;\nexports.isRaspbian = isRaspbian;\nexports.sanitizeShellString = sanitizeShellString;\nexports.decodePiCpuinfo = decodePiCpuinfo;","map":{"version":3,"sources":["/Users/samianki/node_modules/systeminformation/lib/util.js"],"names":["os","require","fs","spawn","exec","execSync","util","_platform","process","platform","_linux","_darwin","_windows","_freebsd","_openbsd","_netbsd","_cores","wmicPath","codepage","execOptsWin","windowsHide","maxBuffer","encoding","env","_extend","LANG","toInt","value","result","parseInt","isNaN","isFunction","functionToCheck","getType","toString","call","unique","obj","uniques","stringify","i","length","keys","Object","sort","a","b","str","j","JSON","hasOwnProperty","push","sortByKey","array","x","y","forEach","key","cores","cpus","getValue","lines","property","separator","trimmed","toLowerCase","line","replace","trim","startsWith","parts","split","shift","join","decodeEscapeSequence","base","String","fromCharCode","arguments","detectSplit","seperator","part","element","parseTime","t","pmDesignator","toUpperCase","hour","min","splitter","isPM","indexOf","substr","parseDateTime","dt","culture","date","time","dateFormat","dtparts","isEN","parseHead","head","rights","space","count","from","to","test","cap","substring","len","splice","findObjectByKey","getWmic","type","WINDIR","existsSync","wmicPathArray","e","wmic","command","options","Promise","resolve","nextTick","error","stdout","stdin","end","getVboxmanage","VBOX_INSTALL_PATH","VBOX_MSI_INSTALL_PATH","powerShell","cmd","child","stdio","pid","on","data","stderr","kill","write","EOL","getCodepage","err","isRaspberry","PI_MODEL_NO","cpuinfo","readFileSync","hardware","isRaspbian","osrelease","id","execWin","opts","callback","newCmd","darwinXcodeExists","cmdLineToolsExists","xcodeAppExists","xcodeExists","nanoSeconds","hrtime","Array","isArray","countUniqueLines","startingWith","uniqueLines","countLines","sanitizeShellString","hex2bin","hex","decodePiCpuinfo","oldRevisionCodes","revision","memory","manufacturer","processor","processorList","manufacturerList","typeList","revisionCode","model","serial","memSizeCode","typeCode","Math","pow","noop","exports"],"mappings":"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","sourcesContent":["'use strict';\n// @ts-check\n// ==================================================================================\n// utils.js\n// ----------------------------------------------------------------------------------\n// Description:   System Information - library\n//                for Node.js\n// Copyright:     (c) 2014 - 2020\n// Author:        Sebastian Hildebrandt\n// ----------------------------------------------------------------------------------\n// License:       MIT\n// ==================================================================================\n// 0. helper functions\n// ----------------------------------------------------------------------------------\n\nconst os = require('os');\nconst fs = require('fs');\nconst spawn = require('child_process').spawn;\nconst exec = require('child_process').exec;\nconst execSync = require('child_process').execSync;\nconst util = require('util');\n\nlet _platform = process.platform;\nconst _linux = (_platform === 'linux');\nconst _darwin = (_platform === 'darwin');\nconst _windows = (_platform === 'win32');\nconst _freebsd = (_platform === 'freebsd');\nconst _openbsd = (_platform === 'openbsd');\nconst _netbsd = (_platform === 'netbsd');\n// const _sunos = (_platform === 'sunos');\n\nlet _cores = 0;\nlet wmicPath = '';\nlet codepage = '';\n\nconst execOptsWin = {\n  windowsHide: true,\n  maxBuffer: 1024 * 20000,\n  encoding: 'UTF-8',\n  env: util._extend({}, process.env, { LANG: 'en_US.UTF-8' })\n};\n\nfunction toInt(value) {\n  let result = parseInt(value, 10);\n  if (isNaN(result)) {\n    result = 0;\n  }\n  return result;\n}\n\nfunction isFunction(functionToCheck) {\n  let getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\nfunction unique(obj) {\n  let uniques = [];\n  let stringify = {};\n  for (let i = 0; i < obj.length; i++) {\n    let keys = Object.keys(obj[i]);\n    keys.sort(function (a, b) { return a - b; });\n    let str = '';\n    for (let j = 0; j < keys.length; j++) {\n      str += JSON.stringify(keys[j]);\n      str += JSON.stringify(obj[i][keys[j]]);\n    }\n    if (!{}.hasOwnProperty.call(stringify, str)) {\n      uniques.push(obj[i]);\n      stringify[str] = true;\n    }\n  }\n  return uniques;\n}\n\nfunction sortByKey(array, keys) {\n  return array.sort(function (a, b) {\n    let x = '';\n    let y = '';\n    keys.forEach(function (key) {\n      x = x + a[key]; y = y + b[key];\n    });\n    return ((x < y) ? -1 : ((x > y) ? 1 : 0));\n  });\n}\n\nfunction cores() {\n  if (_cores === 0) {\n    _cores = os.cpus().length;\n  }\n  return _cores;\n}\n\nfunction getValue(lines, property, separator, trimmed) {\n  separator = separator || ':';\n  property = property.toLowerCase();\n  trimmed = trimmed || false;\n  for (let i = 0; i < lines.length; i++) {\n    let line = lines[i].toLowerCase().replace(/\\t/g, '');\n    if (trimmed) {\n      line = line.trim();\n    }\n    if (line.startsWith(property)) {\n      const parts = lines[i].split(separator);\n      if (parts.length >= 2) {\n        parts.shift();\n        return parts.join(separator).trim();\n      } else {\n        return '';\n      }\n    }\n  }\n  return '';\n}\n\nfunction decodeEscapeSequence(str, base) {\n  base = base || 16;\n  return str.replace(/\\\\x([0-9A-Fa-f]{2})/g, function () {\n    return String.fromCharCode(parseInt(arguments[1], base));\n  });\n}\n\nfunction detectSplit(str) {\n  let seperator = '';\n  let part = 0;\n  str.split('').forEach(element => {\n    if (element >= '0' && element <= '9') {\n      if (part === 1) { part++; }\n    } else {\n      if (part === 0) { part++; }\n      if (part === 1) {\n        seperator += element;\n      }\n    }\n  });\n  return seperator;\n}\n\nfunction parseTime(t, pmDesignator) {\n  pmDesignator = pmDesignator || '';\n  t = t.toUpperCase();\n  let hour = 0;\n  let min = 0;\n  let splitter = detectSplit(t);\n  let parts = t.split(splitter);\n  if (parts.length >= 2) {\n    if (parts[2]) {\n      parts[1] += parts[2];\n    }\n    let isPM = (parts[1] && (parts[1].toLowerCase().indexOf('pm') > -1) || (parts[1].toLowerCase().indexOf('p.m.') > -1) || (parts[1].toLowerCase().indexOf('p. m.') > -1) || (parts[1].toLowerCase().indexOf('n') > -1) || (parts[1].toLowerCase().indexOf('ch') > -1) || (parts[1].toLowerCase().indexOf('Ã¶s') > -1) || (pmDesignator && parts[1].toLowerCase().indexOf(pmDesignator) > -1));\n    hour = parseInt(parts[0], 10);\n    min = parseInt(parts[1], 10);\n    hour = isPM && hour < 12 ? hour + 12 : hour;\n    return ('0' + hour).substr(-2) + ':' + ('0' + min).substr(-2);\n  }\n}\n\nfunction parseDateTime(dt, culture) {\n  const result = {\n    date: '',\n    time: ''\n  };\n  culture = culture || {};\n  let dateFormat = (culture.dateFormat || '').toLowerCase();\n  let pmDesignator = (culture.pmDesignator || '');\n\n  const parts = dt.split(' ');\n  if (parts[0]) {\n    if (parts[0].indexOf('/') >= 0) {\n      // Dateformat: mm/dd/yyyy or dd/mm/yyyy or dd/mm/yy or yyyy/mm/dd\n      const dtparts = parts[0].split('/');\n      if (dtparts.length === 3) {\n        if (dtparts[0].length === 4) {\n          // Dateformat: yyyy/mm/dd\n          result.date = dtparts[0] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[2]).substr(-2);\n        } else if (dtparts[2].length === 2) {\n          if ((dateFormat.indexOf('/d/') > -1 || dateFormat.indexOf('/dd/') > -1)) {\n            // Dateformat: mm/dd/yy\n            result.date = '20' + dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n          } else {\n            // Dateformat: dd/mm/yy\n            result.date = '20' + dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n          }\n        } else {\n          // Dateformat: mm/dd/yyyy or dd/mm/yyyy\n          const isEN = ((dt.toLowerCase().indexOf('pm') > -1) || (dt.toLowerCase().indexOf('p.m.') > -1) || (dt.toLowerCase().indexOf('p. m.') > -1) || (dt.toLowerCase().indexOf('am') > -1) || (dt.toLowerCase().indexOf('a.m.') > -1) || (dt.toLowerCase().indexOf('a. m.') > -1));\n          if ((isEN || dateFormat.indexOf('/d/') > -1 || dateFormat.indexOf('/dd/') > -1) && dateFormat.indexOf('dd/') !== 0) {\n            // Dateformat: mm/dd/yyyy\n            result.date = dtparts[2] + '-' + ('0' + dtparts[0]).substr(-2) + '-' + ('0' + dtparts[1]).substr(-2);\n          } else {\n            // Dateformat: dd/mm/yyyy\n            result.date = dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n          }\n        }\n      }\n    }\n    if (parts[0].indexOf('.') >= 0) {\n      const dtparts = parts[0].split('.');\n      if (dtparts.length === 3) {\n        if (dateFormat.indexOf('.d.') > -1 || dateFormat.indexOf('.dd.') > -1) {\n          // Dateformat: mm.dd.yyyy\n          result.date = dtparts[2] + '-' + ('0' + dtparts[0]).substr(-2) + '-' + ('0' + dtparts[1]).substr(-2);\n        } else {\n          // Dateformat: dd.mm.yyyy\n          result.date = dtparts[2] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[0]).substr(-2);\n        }\n      }\n    }\n    if (parts[0].indexOf('-') >= 0) {\n      // Dateformat: yyyy-mm-dd\n      const dtparts = parts[0].split('-');\n      if (dtparts.length === 3) {\n        result.date = dtparts[0] + '-' + ('0' + dtparts[1]).substr(-2) + '-' + ('0' + dtparts[2]).substr(-2);\n      }\n    }\n  }\n  if (parts[1]) {\n    parts.shift();\n    let time = parts.join(' ');\n    result.time = parseTime(time, pmDesignator);\n  }\n  return result;\n}\n\nfunction parseHead(head, rights) {\n  let space = (rights > 0);\n  let count = 1;\n  let from = 0;\n  let to = 0;\n  let result = [];\n  for (let i = 0; i < head.length; i++) {\n    if (count <= rights) {\n      // if (head[i] === ' ' && !space) {\n      if (/\\s/.test(head[i]) && !space) {\n        to = i - 1;\n        result.push({\n          from: from,\n          to: to + 1,\n          cap: head.substring(from, to + 1)\n        });\n        from = to + 2;\n        count++;\n      }\n      space = head[i] === ' ';\n    } else {\n      if (!/\\s/.test(head[i]) && space) {\n        to = i - 1;\n        if (from < to) {\n          result.push({\n            from: from,\n            to: to,\n            cap: head.substring(from, to)\n          });\n        }\n        from = to + 1;\n        count++;\n      }\n      space = head[i] === ' ';\n    }\n  }\n  to = 1000;\n  result.push({\n    from: from,\n    to: to,\n    cap: head.substring(from, to)\n  });\n  let len = result.length;\n  for (var i = 0; i < len; i++) {\n    if (result[i].cap.replace(/\\s/g, '').length === 0) {\n      if (i + 1 < len) {\n        result[i].to = result[i + 1].to;\n        result[i].cap = result[i].cap + result[i + 1].cap;\n        result.splice(i + 1, 1);\n        len = len - 1;\n      }\n    }\n  }\n  return result;\n}\n\nfunction findObjectByKey(array, key, value) {\n  for (let i = 0; i < array.length; i++) {\n    if (array[i][key] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction getWmic() {\n  if (os.type() === 'Windows_NT' && !wmicPath) {\n    wmicPath = process.env.WINDIR + '\\\\system32\\\\wbem\\\\wmic.exe';\n    if (!fs.existsSync(wmicPath)) {\n      try {\n        const wmicPathArray = execSync('WHERE WMIC').toString().split('\\r\\n');\n        if (wmicPathArray && wmicPathArray.length) {\n          wmicPath = wmicPathArray[0];\n        } else {\n          wmicPath = 'wmic';\n        }\n      } catch (e) {\n        wmicPath = 'wmic';\n      }\n    }\n  }\n  return wmicPath;\n}\n\nfunction wmic(command, options) {\n  options = options || execOptsWin;\n  return new Promise((resolve) => {\n    process.nextTick(() => {\n      try {\n        exec(process.env.WINDIR + '\\\\system32\\\\chcp.com 65001 | ' + getWmic() + ' ' + command, options, function (error, stdout) {\n          resolve(stdout, error);\n        }).stdin.end();\n      } catch (e) {\n        resolve('', e);\n      }\n    });\n  });\n}\n\nfunction getVboxmanage() {\n  return _windows ? process.env.VBOX_INSTALL_PATH || process.env.VBOX_MSI_INSTALL_PATH + '\\\\VBoxManage.exe' + '\" ' : 'vboxmanage';\n}\n\nfunction powerShell(cmd) {\n\n  let result = '';\n\n  return new Promise((resolve) => {\n    process.nextTick(() => {\n      try {\n        const child = spawn('powershell.exe', ['-NoLogo', '-InputFormat', 'Text', '-NoExit', '-ExecutionPolicy', 'Unrestricted', '-Command', '-'], {\n          stdio: 'pipe',\n          windowsHide: true,\n          maxBuffer: 1024 * 20000,\n          encoding: 'UTF-8',\n          env: util._extend({}, process.env, { LANG: 'en_US.UTF-8' })\n        });\n\n        if (child && !child.pid) {\n          child.on('error', function () {\n            resolve(result);\n          });\n        }\n        if (child && child.pid) {\n          child.stdout.on('data', function (data) {\n            result = result + data.toString('utf8');\n          });\n          child.stderr.on('data', function () {\n            child.kill();\n            resolve(result);\n          });\n          child.on('close', function () {\n            child.kill();\n            resolve(result);\n          });\n          child.on('error', function () {\n            child.kill();\n            resolve(result);\n          });\n          try {\n            child.stdin.write(cmd + os.EOL);\n            child.stdin.write('exit' + os.EOL);\n            child.stdin.end();\n          } catch (e) {\n            child.kill();\n            resolve(result);\n          }\n        } else {\n          resolve(result);\n        }\n      } catch (e) {\n        resolve(result);\n      }\n    });\n  });\n}\n\nfunction getCodepage() {\n  if (_windows) {\n    if (!codepage) {\n      try {\n        const stdout = execSync('chcp');\n        const lines = stdout.toString().split('\\r\\n');\n        const parts = lines[0].split(':');\n        codepage = parts.length > 1 ? parts[1].replace('.', '') : '';\n      } catch (err) {\n        codepage = '437';\n      }\n    }\n    return codepage;\n  }\n  if (_linux || _darwin || _freebsd || _openbsd || _netbsd) {\n    if (!codepage) {\n      try {\n        const stdout = execSync('echo $LANG');\n        const lines = stdout.toString().split('\\r\\n');\n        const parts = lines[0].split('.');\n        codepage = parts.length > 1 ? parts[1].trim() : '';\n        if (!codepage) {\n          codepage = 'UTF-8';\n        }\n      } catch (err) {\n        codepage = 'UTF-8';\n      }\n    }\n    return codepage;\n  }\n}\n\nfunction isRaspberry() {\n  const PI_MODEL_NO = [\n    'BCM2708',\n    'BCM2709',\n    'BCM2710',\n    'BCM2835',\n    'BCM2837B0'\n  ];\n  let cpuinfo = [];\n  try {\n    cpuinfo = fs.readFileSync('/proc/cpuinfo', { encoding: 'utf8' }).split('\\n');\n  } catch (e) {\n    return false;\n  }\n  const hardware = getValue(cpuinfo, 'hardware');\n  return (hardware && PI_MODEL_NO.indexOf(hardware) > -1);\n}\n\nfunction isRaspbian() {\n  let osrelease = [];\n  try {\n    osrelease = fs.readFileSync('/etc/os-release', { encoding: 'utf8' }).split('\\n');\n  } catch (e) {\n    return false;\n  }\n  const id = getValue(osrelease, 'id');\n  return (id && id.indexOf('raspbian') > -1);\n}\n\nfunction execWin(cmd, opts, callback) {\n  if (!callback) {\n    callback = opts;\n    opts = execOptsWin;\n  }\n  let newCmd = 'chcp 65001 > nul && cmd /C ' + cmd + ' && chcp ' + codepage + ' > nul';\n  exec(newCmd, opts, function (error, stdout) {\n    callback(error, stdout);\n  });\n}\n\nfunction darwinXcodeExists() {\n  const cmdLineToolsExists = fs.existsSync('/Library/Developer/CommandLineTools/usr/bin/');\n  const xcodeAppExists = fs.existsSync('/Applications/Xcode.app/Contents/Developer/Tools');\n  const xcodeExists = fs.existsSync('/Library/Developer/Xcode/');\n  return (cmdLineToolsExists || xcodeExists || xcodeAppExists);\n}\n\nfunction nanoSeconds() {\n  const time = process.hrtime();\n  if (!Array.isArray(time) || time.length !== 2) {\n    return 0;\n  }\n  return +time[0] * 1e9 + +time[1];\n}\n\nfunction countUniqueLines(lines, startingWith) {\n  startingWith = startingWith || '';\n  const uniqueLines = [];\n  lines.forEach(line => {\n    if (line.startsWith(startingWith)) {\n      if (uniqueLines.indexOf(line) === -1) {\n        uniqueLines.push(line);\n      }\n    }\n  });\n  return uniqueLines.length;\n}\n\nfunction countLines(lines, startingWith) {\n  startingWith = startingWith || '';\n  const uniqueLines = [];\n  lines.forEach(line => {\n    if (line.startsWith(startingWith)) {\n      uniqueLines.push(line);\n    }\n  });\n  return uniqueLines.length;\n}\n\nfunction sanitizeShellString(str) {\n  let result = str || '';\n  result = result.replace(/>/g, '');\n  result = result.replace(/</g, '');\n  result = result.replace(/\\*/g, '');\n  result = result.replace(/\\?/g, '');\n  result = result.replace(/\\[/g, '');\n  result = result.replace(/\\]/g, '');\n  result = result.replace(/\\|/g, '');\n  result = result.replace(/\\`/g, '');\n  result = result.replace(/\\$/g, '');\n  result = result.replace(/;/g, '');\n  result = result.replace(/&/g, '');\n  result = result.replace(/\\)/g, '');\n  result = result.replace(/\\(/g, '');\n  result = result.replace(/\\$/g, '');\n  result = result.replace(/#/g, '');\n  result = result.replace(/\\\\/g, '');\n  result = result.replace(/\\t/g, '');\n  result = result.replace(/\\n/g, '');\n  result = result.replace(/\\\"/g, '');\n  return result;\n}\n\nfunction hex2bin(hex) {\n  return (\"00000000\" + (parseInt(hex, 16)).toString(2)).substr(-8);\n}\n\nfunction decodePiCpuinfo(lines) {\n\n  // https://www.raspberrypi.org/documentation/hardware/raspberrypi/revision-codes/README.md\n\n  const oldRevisionCodes = {\n    '0002': {\n      type: 'B',\n      revision: '1.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0003': {\n      type: 'B',\n      revision: '1.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0004': {\n      type: 'B',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0005': {\n      type: 'B',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Qisda',\n      processor: 'BCM2835'\n    },\n    '0006': {\n      type: 'B',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0007': {\n      type: 'A',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0008': {\n      type: 'A',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0009': {\n      type: 'A',\n      revision: '2.0',\n      memory: 256,\n      manufacturer: 'Qisda',\n      processor: 'BCM2835'\n    },\n    '000d': {\n      type: 'B',\n      revision: '2.0',\n      memory: 512,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '000e': {\n      type: 'B',\n      revision: '2.0',\n      memory: 512,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '000f': {\n      type: 'B',\n      revision: '2.0',\n      memory: 512,\n      manufacturer: 'Egoman',\n      processor: 'BCM2835'\n    },\n    '0010': {\n      type: 'B+',\n      revision: '1.2',\n      memory: 512,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0011': {\n      type: 'CM1',\n      revision: '1.0',\n      memory: 512,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0012': {\n      type: 'A+',\n      revision: '1.1',\n      memory: 256,\n      manufacturer: 'Sony UK',\n      processor: 'BCM2835'\n    },\n    '0013': {\n      type: 'B+',\n      revision: '1.2',\n      memory: 512,\n      manufacturer: 'Embest',\n      processor: 'BCM2835'\n    },\n    '0014': {\n      type: 'CM1',\n      revision: '1.0',\n      memory: 512,\n      manufacturer: 'Embest',\n      processor: 'BCM2835'\n    },\n    '0015': {\n      type: 'A+',\n      revision: '1.1',\n      memory: 256,\n      manufacturer: '512MB\tEmbest',\n      processor: 'BCM2835'\n    }\n  }\n\n  const processorList = [\n    'BMC2835',\n    'BMC2836',\n    'BMC2837',\n    'BMC2711',\n  ];\n  const manufacturerList = [\n    'Sony UK',\n    'Egoman',\n    'Embest',\n    'Sony Japan',\n    'Embest',\n    'Stadium'\n  ];\n  const typeList = {\n    '00': 'A',\n    '01': 'B',\n    '02': 'A+',\n    '03': 'B+',\n    '04': '2B',\n    '05': 'Alpha (early prototype)',\n    '06': 'CM1',\n    '08': '3B',\n    '09': 'Zero',\n    '0a': 'CM3',\n    '0c': 'Zero W',\n    '0d': '3B+',\n    '0e': '3A+',\n    '0f': 'Internal use only',\n    '10': 'CM3+',\n    '11': '4B',\n    '13': '400',\n    '14': 'CM4'\n  };\n\n  const revisionCode = getValue(lines, 'revision', ':', true);\n  const model = getValue(lines, 'model:', ':', true);\n  const serial = getValue(lines, 'serial', ':', true);\n\n  let result = {};\n  if (oldRevisionCodes.hasOwnProperty(revisionCode)) {\n    // old revision codes\n    result = {\n      model,\n      serial,\n      revisionCode,\n      memory: oldRevisionCodes[revisionCode].memory,\n      manufacturer: oldRevisionCodes[revisionCode].manufacturer,\n      processor: oldRevisionCodes[revisionCode].processor,\n      type: oldRevisionCodes[revisionCode].type,\n      revision: oldRevisionCodes[revisionCode].revision,\n    }\n\n  } else {\n    // new revision code\n    const revision = ('00000000' + getValue(lines, 'revision', ':', true).toLowerCase()).substr(-8);\n    // const revisionStyleNew = hex2bin(revision.substr(2, 1)).substr(4, 1) === '1';\n    const memSizeCode = parseInt(hex2bin(revision.substr(2, 1)).substr(5, 3), 2) || 0;\n    const manufacturer = manufacturerList[parseInt(revision.substr(3, 1), 10)];\n    const processor = processorList[parseInt(revision.substr(4, 1), 10)];\n    const typeCode = revision.substr(5, 2);\n\n\n    result = {\n      model,\n      serial,\n      revisionCode,\n      memory: 256 * Math.pow(2, memSizeCode),\n      manufacturer,\n      processor,\n      type: typeList.hasOwnProperty(typeCode) ? typeList[typeCode] : '',\n      revision: '1.' + revision.substr(7, 1),\n    }\n  }\n  return result;\n}\n\nfunction noop() { }\n\nexports.toInt = toInt;\nexports.execOptsWin = execOptsWin;\nexports.getCodepage = getCodepage;\nexports.execWin = execWin;\nexports.isFunction = isFunction;\nexports.unique = unique;\nexports.sortByKey = sortByKey;\nexports.cores = cores;\nexports.getValue = getValue;\nexports.decodeEscapeSequence = decodeEscapeSequence;\nexports.parseDateTime = parseDateTime;\nexports.parseHead = parseHead;\nexports.findObjectByKey = findObjectByKey;\nexports.getWmic = getWmic;\nexports.wmic = wmic;\nexports.darwinXcodeExists = darwinXcodeExists;\nexports.getVboxmanage = getVboxmanage;\nexports.powerShell = powerShell;\nexports.nanoSeconds = nanoSeconds;\nexports.countUniqueLines = countUniqueLines;\nexports.countLines = countLines;\nexports.noop = noop;\nexports.isRaspberry = isRaspberry;\nexports.isRaspbian = isRaspbian;\nexports.sanitizeShellString = sanitizeShellString;\nexports.decodePiCpuinfo = decodePiCpuinfo;\n"]},"metadata":{},"sourceType":"script"}