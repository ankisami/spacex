{"ast":null,"code":"/**\n * listtable.js - list table element for blessed\n * Copyright (c) 2013-2015, Christopher Jeffrey and contributors (MIT License).\n * https://github.com/chjj/blessed\n */\n\n/**\n * Modules\n */\nvar Node = require('./node');\n\nvar Box = require('./box');\n\nvar List = require('./list');\n\nvar Table = require('./table');\n/**\n * ListTable\n */\n\n\nfunction ListTable(options) {\n  var self = this;\n\n  if (!(this instanceof Node)) {\n    return new ListTable(options);\n  }\n\n  options = options || {};\n  options.shrink = true;\n  options.normalShrink = true;\n  options.style = options.style || {};\n  options.style.border = options.style.border || {};\n  options.style.header = options.style.header || {};\n  options.style.cell = options.style.cell || {};\n  this.__align = options.align || 'center';\n  delete options.align;\n  options.style.selected = options.style.cell.selected;\n  options.style.item = options.style.cell;\n  List.call(this, options);\n  this._header = new Box({\n    parent: this,\n    left: this.screen.autoPadding ? 0 : this.ileft,\n    top: 0,\n    width: 'shrink',\n    height: 1,\n    style: options.style.header,\n    tags: options.parseTags || options.tags\n  });\n  this.on('scroll', function () {\n    self._header.setFront();\n\n    self._header.rtop = self.childBase;\n\n    if (!self.screen.autoPadding) {\n      self._header.rtop = self.childBase + (self.border ? 1 : 0);\n    }\n  });\n  this.pad = options.pad != null ? options.pad : 2;\n  this.setData(options.rows || options.data);\n  this.on('attach', function () {\n    self.setData(self.rows);\n  });\n  this.on('resize', function () {\n    var selected = self.selected;\n    self.setData(self.rows);\n    self.select(selected);\n    self.screen.render();\n  });\n}\n\nListTable.prototype.__proto__ = List.prototype;\nListTable.prototype.type = 'list-table';\nListTable.prototype._calculateMaxes = Table.prototype._calculateMaxes;\n\nListTable.prototype.setRows = ListTable.prototype.setData = function (rows) {\n  var self = this,\n      align = this.__align;\n\n  if (this.visible && this.lpos) {\n    this.clearPos();\n  }\n\n  this.clearItems();\n  this.rows = rows || [];\n\n  this._calculateMaxes();\n\n  if (!this._maxes) return;\n  this.addItem('');\n  this.rows.forEach(function (row, i) {\n    var isHeader = i === 0;\n    var text = '';\n    row.forEach(function (cell, i) {\n      var width = self._maxes[i];\n      var clen = self.strWidth(cell);\n\n      if (i !== 0) {\n        text += ' ';\n      }\n\n      while (clen < width) {\n        if (align === 'center') {\n          cell = ' ' + cell + ' ';\n          clen += 2;\n        } else if (align === 'left') {\n          cell = cell + ' ';\n          clen += 1;\n        } else if (align === 'right') {\n          cell = ' ' + cell;\n          clen += 1;\n        }\n      }\n\n      if (clen > width) {\n        if (align === 'center') {\n          cell = cell.substring(1);\n          clen--;\n        } else if (align === 'left') {\n          cell = cell.slice(0, -1);\n          clen--;\n        } else if (align === 'right') {\n          cell = cell.substring(1);\n          clen--;\n        }\n      }\n\n      text += cell;\n    });\n\n    if (isHeader) {\n      self._header.setContent(text);\n    } else {\n      self.addItem(text);\n    }\n  });\n\n  this._header.setFront();\n\n  this.select(0);\n};\n\nListTable.prototype._select = ListTable.prototype.select;\n\nListTable.prototype.select = function (i) {\n  if (i === 0) {\n    i = 1;\n  }\n\n  if (i <= this.childBase) {\n    this.setScroll(this.childBase - 1);\n  }\n\n  return this._select(i);\n};\n\nListTable.prototype.render = function () {\n  var self = this;\n\n  var coords = this._render();\n\n  if (!coords) return;\n\n  this._calculateMaxes();\n\n  if (!this._maxes) return coords;\n  var lines = this.screen.lines,\n      xi = coords.xi,\n      yi = coords.yi,\n      rx,\n      ry,\n      i;\n  var battr = this.sattr(this.style.border);\n  var height = coords.yl - coords.yi - this.ibottom;\n  if (!this.border || this.options.noCellBorders) return coords; // Draw border with correct angles.\n\n  ry = 0;\n\n  for (i = 0; i < height + 1; i++) {\n    if (!lines[yi + ry]) break;\n    rx = 0;\n\n    self._maxes.slice(0, -1).forEach(function (max) {\n      rx += max;\n      if (!lines[yi + ry][xi + rx + 1]) return; // center\n\n      if (ry === 0) {\n        // top\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr;\n        lines[yi + ry][xi + rx][1] = '\\u252c'; // '┬'\n        // XXX If we alter iheight and itop for no borders - nothing should be written here\n\n        if (!self.border.top) {\n          lines[yi + ry][xi + rx][1] = '\\u2502'; // '│'\n        }\n\n        lines[yi + ry].dirty = true;\n      } else if (ry === height) {\n        // bottom\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr;\n        lines[yi + ry][xi + rx][1] = '\\u2534'; // '┴'\n        // XXX If we alter iheight and ibottom for no borders - nothing should be written here\n\n        if (!self.border.bottom) {\n          lines[yi + ry][xi + rx][1] = '\\u2502'; // '│'\n        }\n\n        lines[yi + ry].dirty = true;\n      } else {\n        // middle\n        rx++;\n      }\n    });\n\n    ry += 1;\n  } // Draw internal borders.\n\n\n  for (ry = 1; ry < height; ry++) {\n    if (!lines[yi + ry]) break;\n    rx = 0;\n\n    self._maxes.slice(0, -1).forEach(function (max) {\n      rx += max;\n      if (!lines[yi + ry][xi + rx + 1]) return;\n\n      if (self.options.fillCellBorders !== false) {\n        var lbg = lines[yi + ry][xi + rx][0] & 0x1ff;\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr & ~0x1ff | lbg;\n      } else {\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr;\n      }\n\n      lines[yi + ry][xi + rx][1] = '\\u2502'; // '│'\n\n      lines[yi + ry].dirty = true;\n    });\n  }\n\n  return coords;\n};\n/**\n * Expose\n */\n\n\nmodule.exports = ListTable;","map":{"version":3,"sources":["/Users/samianki/node_modules/blessed/lib/widgets/listtable.js"],"names":["Node","require","Box","List","Table","ListTable","options","self","shrink","normalShrink","style","border","header","cell","__align","align","selected","item","call","_header","parent","left","screen","autoPadding","ileft","top","width","height","tags","parseTags","on","setFront","rtop","childBase","pad","setData","rows","data","select","render","prototype","__proto__","type","_calculateMaxes","setRows","visible","lpos","clearPos","clearItems","_maxes","addItem","forEach","row","i","isHeader","text","clen","strWidth","substring","slice","setContent","_select","setScroll","coords","_render","lines","xi","yi","rx","ry","battr","sattr","yl","ibottom","noCellBorders","max","dirty","bottom","fillCellBorders","lbg","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAAlB;;AACA,IAAIC,GAAG,GAAGD,OAAO,CAAC,OAAD,CAAjB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,QAAD,CAAlB;;AACA,IAAIG,KAAK,GAAGH,OAAO,CAAC,SAAD,CAAnB;AAEA;AACA;AACA;;;AAEA,SAASI,SAAT,CAAmBC,OAAnB,EAA4B;AAC1B,MAAIC,IAAI,GAAG,IAAX;;AAEA,MAAI,EAAE,gBAAgBP,IAAlB,CAAJ,EAA6B;AAC3B,WAAO,IAAIK,SAAJ,CAAcC,OAAd,CAAP;AACD;;AAEDA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAA,EAAAA,OAAO,CAACE,MAAR,GAAiB,IAAjB;AACAF,EAAAA,OAAO,CAACG,YAAR,GAAuB,IAAvB;AACAH,EAAAA,OAAO,CAACI,KAAR,GAAgBJ,OAAO,CAACI,KAAR,IAAiB,EAAjC;AACAJ,EAAAA,OAAO,CAACI,KAAR,CAAcC,MAAd,GAAuBL,OAAO,CAACI,KAAR,CAAcC,MAAd,IAAwB,EAA/C;AACAL,EAAAA,OAAO,CAACI,KAAR,CAAcE,MAAd,GAAuBN,OAAO,CAACI,KAAR,CAAcE,MAAd,IAAwB,EAA/C;AACAN,EAAAA,OAAO,CAACI,KAAR,CAAcG,IAAd,GAAqBP,OAAO,CAACI,KAAR,CAAcG,IAAd,IAAsB,EAA3C;AACA,OAAKC,OAAL,GAAeR,OAAO,CAACS,KAAR,IAAiB,QAAhC;AACA,SAAOT,OAAO,CAACS,KAAf;AAEAT,EAAAA,OAAO,CAACI,KAAR,CAAcM,QAAd,GAAyBV,OAAO,CAACI,KAAR,CAAcG,IAAd,CAAmBG,QAA5C;AACAV,EAAAA,OAAO,CAACI,KAAR,CAAcO,IAAd,GAAqBX,OAAO,CAACI,KAAR,CAAcG,IAAnC;AAEAV,EAAAA,IAAI,CAACe,IAAL,CAAU,IAAV,EAAgBZ,OAAhB;AAEA,OAAKa,OAAL,GAAe,IAAIjB,GAAJ,CAAQ;AACrBkB,IAAAA,MAAM,EAAE,IADa;AAErBC,IAAAA,IAAI,EAAE,KAAKC,MAAL,CAAYC,WAAZ,GAA0B,CAA1B,GAA8B,KAAKC,KAFpB;AAGrBC,IAAAA,GAAG,EAAE,CAHgB;AAIrBC,IAAAA,KAAK,EAAE,QAJc;AAKrBC,IAAAA,MAAM,EAAE,CALa;AAMrBjB,IAAAA,KAAK,EAAEJ,OAAO,CAACI,KAAR,CAAcE,MANA;AAOrBgB,IAAAA,IAAI,EAAEtB,OAAO,CAACuB,SAAR,IAAqBvB,OAAO,CAACsB;AAPd,GAAR,CAAf;AAUA,OAAKE,EAAL,CAAQ,QAAR,EAAkB,YAAW;AAC3BvB,IAAAA,IAAI,CAACY,OAAL,CAAaY,QAAb;;AACAxB,IAAAA,IAAI,CAACY,OAAL,CAAaa,IAAb,GAAoBzB,IAAI,CAAC0B,SAAzB;;AACA,QAAI,CAAC1B,IAAI,CAACe,MAAL,CAAYC,WAAjB,EAA8B;AAC5BhB,MAAAA,IAAI,CAACY,OAAL,CAAaa,IAAb,GAAoBzB,IAAI,CAAC0B,SAAL,IAAkB1B,IAAI,CAACI,MAAL,GAAc,CAAd,GAAkB,CAApC,CAApB;AACD;AACF,GAND;AAQA,OAAKuB,GAAL,GAAW5B,OAAO,CAAC4B,GAAR,IAAe,IAAf,GACP5B,OAAO,CAAC4B,GADD,GAEP,CAFJ;AAIA,OAAKC,OAAL,CAAa7B,OAAO,CAAC8B,IAAR,IAAgB9B,OAAO,CAAC+B,IAArC;AAEA,OAAKP,EAAL,CAAQ,QAAR,EAAkB,YAAW;AAC3BvB,IAAAA,IAAI,CAAC4B,OAAL,CAAa5B,IAAI,CAAC6B,IAAlB;AACD,GAFD;AAIA,OAAKN,EAAL,CAAQ,QAAR,EAAkB,YAAW;AAC3B,QAAId,QAAQ,GAAGT,IAAI,CAACS,QAApB;AACAT,IAAAA,IAAI,CAAC4B,OAAL,CAAa5B,IAAI,CAAC6B,IAAlB;AACA7B,IAAAA,IAAI,CAAC+B,MAAL,CAAYtB,QAAZ;AACAT,IAAAA,IAAI,CAACe,MAAL,CAAYiB,MAAZ;AACD,GALD;AAMD;;AAEDlC,SAAS,CAACmC,SAAV,CAAoBC,SAApB,GAAgCtC,IAAI,CAACqC,SAArC;AAEAnC,SAAS,CAACmC,SAAV,CAAoBE,IAApB,GAA2B,YAA3B;AAEArC,SAAS,CAACmC,SAAV,CAAoBG,eAApB,GAAsCvC,KAAK,CAACoC,SAAN,CAAgBG,eAAtD;;AAEAtC,SAAS,CAACmC,SAAV,CAAoBI,OAApB,GACAvC,SAAS,CAACmC,SAAV,CAAoBL,OAApB,GAA8B,UAASC,IAAT,EAAe;AAC3C,MAAI7B,IAAI,GAAG,IAAX;AAAA,MACIQ,KAAK,GAAG,KAAKD,OADjB;;AAGA,MAAI,KAAK+B,OAAL,IAAgB,KAAKC,IAAzB,EAA+B;AAC7B,SAAKC,QAAL;AACD;;AAED,OAAKC,UAAL;AAEA,OAAKZ,IAAL,GAAYA,IAAI,IAAI,EAApB;;AAEA,OAAKO,eAAL;;AAEA,MAAI,CAAC,KAAKM,MAAV,EAAkB;AAElB,OAAKC,OAAL,CAAa,EAAb;AAEA,OAAKd,IAAL,CAAUe,OAAV,CAAkB,UAASC,GAAT,EAAcC,CAAd,EAAiB;AACjC,QAAIC,QAAQ,GAAGD,CAAC,KAAK,CAArB;AACA,QAAIE,IAAI,GAAG,EAAX;AACAH,IAAAA,GAAG,CAACD,OAAJ,CAAY,UAAStC,IAAT,EAAewC,CAAf,EAAkB;AAC5B,UAAI3B,KAAK,GAAGnB,IAAI,CAAC0C,MAAL,CAAYI,CAAZ,CAAZ;AACA,UAAIG,IAAI,GAAGjD,IAAI,CAACkD,QAAL,CAAc5C,IAAd,CAAX;;AAEA,UAAIwC,CAAC,KAAK,CAAV,EAAa;AACXE,QAAAA,IAAI,IAAI,GAAR;AACD;;AAED,aAAOC,IAAI,GAAG9B,KAAd,EAAqB;AACnB,YAAIX,KAAK,KAAK,QAAd,EAAwB;AACtBF,UAAAA,IAAI,GAAG,MAAMA,IAAN,GAAa,GAApB;AACA2C,UAAAA,IAAI,IAAI,CAAR;AACD,SAHD,MAGO,IAAIzC,KAAK,KAAK,MAAd,EAAsB;AAC3BF,UAAAA,IAAI,GAAGA,IAAI,GAAG,GAAd;AACA2C,UAAAA,IAAI,IAAI,CAAR;AACD,SAHM,MAGA,IAAIzC,KAAK,KAAK,OAAd,EAAuB;AAC5BF,UAAAA,IAAI,GAAG,MAAMA,IAAb;AACA2C,UAAAA,IAAI,IAAI,CAAR;AACD;AACF;;AAED,UAAIA,IAAI,GAAG9B,KAAX,EAAkB;AAChB,YAAIX,KAAK,KAAK,QAAd,EAAwB;AACtBF,UAAAA,IAAI,GAAGA,IAAI,CAAC6C,SAAL,CAAe,CAAf,CAAP;AACAF,UAAAA,IAAI;AACL,SAHD,MAGO,IAAIzC,KAAK,KAAK,MAAd,EAAsB;AAC3BF,UAAAA,IAAI,GAAGA,IAAI,CAAC8C,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAP;AACAH,UAAAA,IAAI;AACL,SAHM,MAGA,IAAIzC,KAAK,KAAK,OAAd,EAAuB;AAC5BF,UAAAA,IAAI,GAAGA,IAAI,CAAC6C,SAAL,CAAe,CAAf,CAAP;AACAF,UAAAA,IAAI;AACL;AACF;;AAEDD,MAAAA,IAAI,IAAI1C,IAAR;AACD,KAnCD;;AAoCA,QAAIyC,QAAJ,EAAc;AACZ/C,MAAAA,IAAI,CAACY,OAAL,CAAayC,UAAb,CAAwBL,IAAxB;AACD,KAFD,MAEO;AACLhD,MAAAA,IAAI,CAAC2C,OAAL,CAAaK,IAAb;AACD;AACF,GA5CD;;AA8CA,OAAKpC,OAAL,CAAaY,QAAb;;AAEA,OAAKO,MAAL,CAAY,CAAZ;AACD,CApED;;AAsEAjC,SAAS,CAACmC,SAAV,CAAoBqB,OAApB,GAA8BxD,SAAS,CAACmC,SAAV,CAAoBF,MAAlD;;AACAjC,SAAS,CAACmC,SAAV,CAAoBF,MAApB,GAA6B,UAASe,CAAT,EAAY;AACvC,MAAIA,CAAC,KAAK,CAAV,EAAa;AACXA,IAAAA,CAAC,GAAG,CAAJ;AACD;;AACD,MAAIA,CAAC,IAAI,KAAKpB,SAAd,EAAyB;AACvB,SAAK6B,SAAL,CAAe,KAAK7B,SAAL,GAAiB,CAAhC;AACD;;AACD,SAAO,KAAK4B,OAAL,CAAaR,CAAb,CAAP;AACD,CARD;;AAUAhD,SAAS,CAACmC,SAAV,CAAoBD,MAApB,GAA6B,YAAW;AACtC,MAAIhC,IAAI,GAAG,IAAX;;AAEA,MAAIwD,MAAM,GAAG,KAAKC,OAAL,EAAb;;AACA,MAAI,CAACD,MAAL,EAAa;;AAEb,OAAKpB,eAAL;;AAEA,MAAI,CAAC,KAAKM,MAAV,EAAkB,OAAOc,MAAP;AAElB,MAAIE,KAAK,GAAG,KAAK3C,MAAL,CAAY2C,KAAxB;AAAA,MACIC,EAAE,GAAGH,MAAM,CAACG,EADhB;AAAA,MAEIC,EAAE,GAAGJ,MAAM,CAACI,EAFhB;AAAA,MAGIC,EAHJ;AAAA,MAIIC,EAJJ;AAAA,MAKIhB,CALJ;AAOA,MAAIiB,KAAK,GAAG,KAAKC,KAAL,CAAW,KAAK7D,KAAL,CAAWC,MAAtB,CAAZ;AAEA,MAAIgB,MAAM,GAAGoC,MAAM,CAACS,EAAP,GAAYT,MAAM,CAACI,EAAnB,GAAwB,KAAKM,OAA1C;AAEA,MAAI,CAAC,KAAK9D,MAAN,IAAgB,KAAKL,OAAL,CAAaoE,aAAjC,EAAgD,OAAOX,MAAP,CArBV,CAuBtC;;AACAM,EAAAA,EAAE,GAAG,CAAL;;AACA,OAAKhB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG1B,MAAM,GAAG,CAAzB,EAA4B0B,CAAC,EAA7B,EAAiC;AAC/B,QAAI,CAACY,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAV,EAAqB;AACrBD,IAAAA,EAAE,GAAG,CAAL;;AACA7D,IAAAA,IAAI,CAAC0C,MAAL,CAAYU,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,EAAyBR,OAAzB,CAAiC,UAASwB,GAAT,EAAc;AAC7CP,MAAAA,EAAE,IAAIO,GAAN;AACA,UAAI,CAACV,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAAL,GAAU,CAAzB,CAAL,EAAkC,OAFW,CAG7C;;AACA,UAAIC,EAAE,KAAK,CAAX,EAAc;AACZ;AACAD,QAAAA,EAAE;AACFH,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6BE,KAA7B;AACAL,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6B,QAA7B,CAJY,CAI2B;AACvC;;AACA,YAAI,CAAC7D,IAAI,CAACI,MAAL,CAAYc,GAAjB,EAAsB;AACpBwC,UAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6B,QAA7B,CADoB,CACmB;AACxC;;AACDH,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeO,KAAf,GAAuB,IAAvB;AACD,OAVD,MAUO,IAAIP,EAAE,KAAK1C,MAAX,EAAmB;AACxB;AACAyC,QAAAA,EAAE;AACFH,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6BE,KAA7B;AACAL,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6B,QAA7B,CAJwB,CAIe;AACvC;;AACA,YAAI,CAAC7D,IAAI,CAACI,MAAL,CAAYkE,MAAjB,EAAyB;AACvBZ,UAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6B,QAA7B,CADuB,CACgB;AACxC;;AACDH,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeO,KAAf,GAAuB,IAAvB;AACD,OAVM,MAUA;AACL;AACAR,QAAAA,EAAE;AACH;AACF,KA5BD;;AA6BAC,IAAAA,EAAE,IAAI,CAAN;AACD,GA1DqC,CA4DtC;;;AACA,OAAKA,EAAE,GAAG,CAAV,EAAaA,EAAE,GAAG1C,MAAlB,EAA0B0C,EAAE,EAA5B,EAAgC;AAC9B,QAAI,CAACJ,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAV,EAAqB;AACrBD,IAAAA,EAAE,GAAG,CAAL;;AACA7D,IAAAA,IAAI,CAAC0C,MAAL,CAAYU,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,EAAyBR,OAAzB,CAAiC,UAASwB,GAAT,EAAc;AAC7CP,MAAAA,EAAE,IAAIO,GAAN;AACA,UAAI,CAACV,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAAL,GAAU,CAAzB,CAAL,EAAkC;;AAClC,UAAI7D,IAAI,CAACD,OAAL,CAAawE,eAAb,KAAiC,KAArC,EAA4C;AAC1C,YAAIC,GAAG,GAAGd,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6B,KAAvC;AACAA,QAAAA,EAAE;AACFH,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA8BE,KAAK,GAAG,CAAC,KAAV,GAAmBS,GAAhD;AACD,OAJD,MAIO;AACLX,QAAAA,EAAE;AACFH,QAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6BE,KAA7B;AACD;;AACDL,MAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeH,EAAE,GAAGE,EAApB,EAAwB,CAAxB,IAA6B,QAA7B,CAX6C,CAWN;;AACvCH,MAAAA,KAAK,CAACE,EAAE,GAAGE,EAAN,CAAL,CAAeO,KAAf,GAAuB,IAAvB;AACD,KAbD;AAcD;;AAED,SAAOb,MAAP;AACD,CAjFD;AAmFA;AACA;AACA;;;AAEAiB,MAAM,CAACC,OAAP,GAAiB5E,SAAjB","sourcesContent":["/**\n * listtable.js - list table element for blessed\n * Copyright (c) 2013-2015, Christopher Jeffrey and contributors (MIT License).\n * https://github.com/chjj/blessed\n */\n\n/**\n * Modules\n */\n\nvar Node = require('./node');\nvar Box = require('./box');\nvar List = require('./list');\nvar Table = require('./table');\n\n/**\n * ListTable\n */\n\nfunction ListTable(options) {\n  var self = this;\n\n  if (!(this instanceof Node)) {\n    return new ListTable(options);\n  }\n\n  options = options || {};\n  options.shrink = true;\n  options.normalShrink = true;\n  options.style = options.style || {};\n  options.style.border = options.style.border || {};\n  options.style.header = options.style.header || {};\n  options.style.cell = options.style.cell || {};\n  this.__align = options.align || 'center';\n  delete options.align;\n\n  options.style.selected = options.style.cell.selected;\n  options.style.item = options.style.cell;\n\n  List.call(this, options);\n\n  this._header = new Box({\n    parent: this,\n    left: this.screen.autoPadding ? 0 : this.ileft,\n    top: 0,\n    width: 'shrink',\n    height: 1,\n    style: options.style.header,\n    tags: options.parseTags || options.tags\n  });\n\n  this.on('scroll', function() {\n    self._header.setFront();\n    self._header.rtop = self.childBase;\n    if (!self.screen.autoPadding) {\n      self._header.rtop = self.childBase + (self.border ? 1 : 0);\n    }\n  });\n\n  this.pad = options.pad != null\n    ? options.pad\n    : 2;\n\n  this.setData(options.rows || options.data);\n\n  this.on('attach', function() {\n    self.setData(self.rows);\n  });\n\n  this.on('resize', function() {\n    var selected = self.selected;\n    self.setData(self.rows);\n    self.select(selected);\n    self.screen.render();\n  });\n}\n\nListTable.prototype.__proto__ = List.prototype;\n\nListTable.prototype.type = 'list-table';\n\nListTable.prototype._calculateMaxes = Table.prototype._calculateMaxes;\n\nListTable.prototype.setRows =\nListTable.prototype.setData = function(rows) {\n  var self = this\n    , align = this.__align;\n\n  if (this.visible && this.lpos) {\n    this.clearPos();\n  }\n\n  this.clearItems();\n\n  this.rows = rows || [];\n\n  this._calculateMaxes();\n\n  if (!this._maxes) return;\n\n  this.addItem('');\n\n  this.rows.forEach(function(row, i) {\n    var isHeader = i === 0;\n    var text = '';\n    row.forEach(function(cell, i) {\n      var width = self._maxes[i];\n      var clen = self.strWidth(cell);\n\n      if (i !== 0) {\n        text += ' ';\n      }\n\n      while (clen < width) {\n        if (align === 'center') {\n          cell = ' ' + cell + ' ';\n          clen += 2;\n        } else if (align === 'left') {\n          cell = cell + ' ';\n          clen += 1;\n        } else if (align === 'right') {\n          cell = ' ' + cell;\n          clen += 1;\n        }\n      }\n\n      if (clen > width) {\n        if (align === 'center') {\n          cell = cell.substring(1);\n          clen--;\n        } else if (align === 'left') {\n          cell = cell.slice(0, -1);\n          clen--;\n        } else if (align === 'right') {\n          cell = cell.substring(1);\n          clen--;\n        }\n      }\n\n      text += cell;\n    });\n    if (isHeader) {\n      self._header.setContent(text);\n    } else {\n      self.addItem(text);\n    }\n  });\n\n  this._header.setFront();\n\n  this.select(0);\n};\n\nListTable.prototype._select = ListTable.prototype.select;\nListTable.prototype.select = function(i) {\n  if (i === 0) {\n    i = 1;\n  }\n  if (i <= this.childBase) {\n    this.setScroll(this.childBase - 1);\n  }\n  return this._select(i);\n};\n\nListTable.prototype.render = function() {\n  var self = this;\n\n  var coords = this._render();\n  if (!coords) return;\n\n  this._calculateMaxes();\n\n  if (!this._maxes) return coords;\n\n  var lines = this.screen.lines\n    , xi = coords.xi\n    , yi = coords.yi\n    , rx\n    , ry\n    , i;\n\n  var battr = this.sattr(this.style.border);\n\n  var height = coords.yl - coords.yi - this.ibottom;\n\n  if (!this.border || this.options.noCellBorders) return coords;\n\n  // Draw border with correct angles.\n  ry = 0;\n  for (i = 0; i < height + 1; i++) {\n    if (!lines[yi + ry]) break;\n    rx = 0;\n    self._maxes.slice(0, -1).forEach(function(max) {\n      rx += max;\n      if (!lines[yi + ry][xi + rx + 1]) return;\n      // center\n      if (ry === 0) {\n        // top\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr;\n        lines[yi + ry][xi + rx][1] = '\\u252c'; // '┬'\n        // XXX If we alter iheight and itop for no borders - nothing should be written here\n        if (!self.border.top) {\n          lines[yi + ry][xi + rx][1] = '\\u2502'; // '│'\n        }\n        lines[yi + ry].dirty = true;\n      } else if (ry === height) {\n        // bottom\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr;\n        lines[yi + ry][xi + rx][1] = '\\u2534'; // '┴'\n        // XXX If we alter iheight and ibottom for no borders - nothing should be written here\n        if (!self.border.bottom) {\n          lines[yi + ry][xi + rx][1] = '\\u2502'; // '│'\n        }\n        lines[yi + ry].dirty = true;\n      } else {\n        // middle\n        rx++;\n      }\n    });\n    ry += 1;\n  }\n\n  // Draw internal borders.\n  for (ry = 1; ry < height; ry++) {\n    if (!lines[yi + ry]) break;\n    rx = 0;\n    self._maxes.slice(0, -1).forEach(function(max) {\n      rx += max;\n      if (!lines[yi + ry][xi + rx + 1]) return;\n      if (self.options.fillCellBorders !== false) {\n        var lbg = lines[yi + ry][xi + rx][0] & 0x1ff;\n        rx++;\n        lines[yi + ry][xi + rx][0] = (battr & ~0x1ff) | lbg;\n      } else {\n        rx++;\n        lines[yi + ry][xi + rx][0] = battr;\n      }\n      lines[yi + ry][xi + rx][1] = '\\u2502'; // '│'\n      lines[yi + ry].dirty = true;\n    });\n  }\n\n  return coords;\n};\n\n/**\n * Expose\n */\n\nmodule.exports = ListTable;\n"]},"metadata":{},"sourceType":"script"}